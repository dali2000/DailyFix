<div class="auth-page">
  <h1 class="brand">DailyFix</h1>
  <p class="subtitle">Votre assistant personnel pour une vie organisée</p>

  <section class="card" aria-label="Authentification">
    <h2 class="title">{{ mode === 'login' ? 'Bienvenue' : 'Créer un compte' }}</h2>
    <p class="subtext">
      {{ mode === 'login' ? 'Connectez-vous pour accéder à votre tableau de bord' : 'Inscrivez-vous pour commencer votre organisation' }}
    </p>

    <div class="tabs" role="tablist" aria-label="Mode d'authentification">
      <button type="button" class="tab" [class.active]="mode === 'login'" (click)="switchMode('login')" [attr.aria-selected]="mode==='login'">Connexion</button>
      <button type="button" class="tab" [class.active]="mode === 'signup'" (click)="switchMode('signup')" [attr.aria-selected]="mode==='signup'">Inscription</button>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <ng-container *ngIf="mode === 'signup'">
        <label for="fullName">Nom complet</label>
        <input
          id="fullName"
          type="text"
          formControlName="fullName"
          placeholder="Votre nom et prénom"
          autocomplete="name"
          required
          aria-describedby="fullNameHelp"
        />
        <div id="fullNameHelp" class="error" *ngIf="form.get('fullName')?.touched && form.get('fullName')?.invalid">
          Nom requis (2+ caractères)
        </div>
      </ng-container>

      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="votre@email.com"
        autocomplete="email"
        required
        aria-describedby="emailHelp"
      />
      <div id="emailHelp" class="error" *ngIf="form.get('email')?.touched && form.get('email')?.invalid">
        Entrez un email valide
      </div>

      <label for="password">Mot de passe</label>
      <input
        id="password"
        type="password"
        formControlName="password"
        placeholder="••••••••"
        autocomplete="{{ mode === 'login' ? 'current-password' : 'new-password' }}"
        required
        minlength="6"
        aria-describedby="passwordHelp"
      />
      <div id="passwordHelp" class="error" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
        Mot de passe requis (6+ caractères)
      </div>

      <ng-container *ngIf="mode === 'signup'">
        <label for="confirmPassword">Confirmer le mot de passe</label>
        <input
          id="confirmPassword"
          type="password"
          formControlName="confirmPassword"
          placeholder="••••••••"
          autocomplete="new-password"
          required
          minlength="6"
          aria-describedby="confirmPasswordHelp"
        />
        <div id="confirmPasswordHelp" class="error" *ngIf="(form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid) || form.hasError('passwordsMismatch')">
          Les mots de passe ne correspondent pas
        </div>
      </ng-container>

      <button class="submit" type="submit">{{ mode === 'login' ? 'Se connecter' : "S'inscrire" }}</button>
    </form>
  </section>
</div>