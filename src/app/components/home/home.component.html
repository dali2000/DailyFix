<div class="home-page">
  <h1>Bonjour {{ userName || 'Utilisateur' }} ! ğŸ‘‹</h1>
  <p>PrÃªt Ã  organiser votre journÃ©e ? Voici vos outils DailyFix.</p>


  <div class="cards-container">
    <!-- Task Card -->
    <div class="stats-card blue">
      <div class="card-header">
        <span>TÃ¢ches du jour</span>
        <i class="bi bi-check2-circle"></i>
      </div>
      <div class="card-value">{{ todayHouseholdTasksCount + shoppingListsCount }}</div>
      <div class="card-subtitle" *ngIf="todayHouseholdTasksCount > 0 || shoppingListsCount > 0">
        <span *ngIf="todayHouseholdTasksCount > 0">{{ todayHouseholdTasksCount }} tÃ¢che(s) mÃ©nagÃ¨re(s)</span>
        <span *ngIf="todayHouseholdTasksCount > 0 && shoppingListsCount > 0"> â€¢ </span>
        <span *ngIf="shoppingListsCount > 0">{{ shoppingListsCount }} liste(s) de courses</span>
      </div>
      <div class="card-subtitle" *ngIf="todayHouseholdTasksCount === 0 && shoppingListsCount === 0">
        Aucune tÃ¢che ou liste
      </div>
    </div>

    <!-- Health Score Card -->
    <div class="stats-card green">
      <div class="card-header">
        <span>SantÃ© Score</span>
        <i class="bi bi-heart"></i>
      </div>
      <div class="card-value">{{ healthScore }}%</div>
    </div>

    <!-- Budget Card -->
    <div class="stats-card purple">
      <div class="card-header">
        <span>Reste disponible</span>
        <i class="bi bi-currency-dollar"></i>
      </div>
      <div class="card-value" [class.negative]="remainingBalance < 0">â‚¬{{ remainingBalance | number:'1.0-0' }}</div>
    </div>

    <!-- Events Card -->
    <div class="stats-card orange">
      <div class="card-header">
        <span>Ã‰vÃ©nements</span>
        <i class="bi bi-calendar-event"></i>
      </div>
      <div class="card-value">{{ upcomingEventsCount }}</div>
    </div>
  </div>

  <br><br><br>
  <div class="dashboard">
    <!-- Gestion des tÃ¢ches -->
    <div class="card">
      <div class="card-header">
        <div class="icon blue1">âœ”</div>
        <div>
          <h3>Gestion des TÃ¢ches</h3>
          <small>Organisez vos tÃ¢ches quotidiennes</small>
        </div>
      </div>
      <div>
        <span>TÃ¢ches complÃ©tÃ©es aujourd'hui {{tasksCompleted}}/{{totalTasks}}</span>
        <div class="progress">
          <div class="progress-bar" [style.width.%]="(tasksCompleted / totalTasks) * 100"></div>
        </div>
        <button (click)="navigateTo('/tasks')">GÃ©rer les tÃ¢ches</button>
      </div>
    </div>

    <!-- Suivi SantÃ© -->
    <div class="card">
      <div class="card-header">
        <div class="icon green1">â¤</div>
        <div>
          <h3>Suivi SantÃ©</h3>
          <small>Surveillez votre bien-Ãªtre</small>
        </div>
      </div>
      <p>Pas aujourd'hui: 0</p>
      <p>Eau consommÃ©e: 0L</p>
      <p>Sommeil: 0h</p>
      <button (click)="navigateTo('/health')">Mettre Ã  jour</button>
    </div>

    <!-- Finances -->
    <div class="card">
      <div class="card-header">
        <div class="icon purple1">ğŸ’²</div>
        <div>
          <h3>Finances</h3>
          <small>GÃ©rez votre budget</small>
        </div>
      </div>
      <p>DÃ©penses ce mois: â‚¬{{ monthlyExpenses | number:'1.0-0' }}</p>
      <p [class.green-text]="remainingBalance >= 0" [class.red-text]="remainingBalance < 0">
        Reste disponible: â‚¬{{ remainingBalance | number:'1.0-0' }}
      </p>
      <div class="progress">
        <div class="progress-bar grey1"></div>
      </div>
      <button (click)="navigateTo('/finance')">Ajouter une dÃ©pense</button>
    </div>

    <!-- Organisation Domestique -->
    <div class="card">
      <div class="card-header">
        <div class="icon yellow1">ğŸ </div>
        <div>
          <h3>Organisation Domestique</h3>
          <small>GÃ©rez votre foyer</small>
        </div>
      </div>
      <ul>
        <li *ngFor="let task of upcomingHouseTasks">
          {{task.name}} {{task.date}}
        </li>
      </ul>
      <button (click)="navigateTo('/home-org')">Planifier tÃ¢che</button>
    </div>

    <!-- Ã‰vÃ©nements Sociaux -->
    <div class="card">
      <div class="card-header">
        <div class="icon orange1">ğŸ“…</div>
        <div>
          <h3>Ã‰vÃ©nements Sociaux</h3>
          <small>Planifiez vos sorties</small>
        </div>
      </div>
      <ul>
        <li *ngFor="let event of upcomingEvents">
          {{event.name}} {{event.date}}
        </li>
      </ul>
      <button (click)="navigateTo('/social')">Nouvel Ã©vÃ©nement</button>
    </div>

    <!-- DÃ©veloppement Personnel -->
    <div class="card">
      <div class="card-header">
        <div class="icon violet1">ğŸ¯</div>
        <div>
          <h3>DÃ©veloppement Personnel</h3>
          <small>Atteignez vos objectifs</small>
        </div>
      </div>
      <ul>
        <li *ngFor="let goal of personalGoals">
          {{goal.name}} <span [class.done]="goal.done">âœ”</span>
        </li>
      </ul>
      <button (click)="navigateTo('/wellness')">Nouvel objectif</button>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-section">
    <!-- Tasks Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>ğŸ“Š Avancement des TÃ¢ches</h3>
      </div>
      <div class="chart-content">
        <div class="task-status-chart">
          <div *ngFor="let item of taskStatusData" class="status-bar-item">
            <div class="status-label">
              <span>{{ item.status }}</span>
              <span class="status-count">{{ item.count }}</span>
            </div>
            <div class="status-bar">
              <div class="status-bar-fill" [style.width.%]="item.percentage" [class]="'status-' + item.status.toLowerCase().replace(' ', '-')"></div>
            </div>
            <span class="status-percentage">{{ item.percentage | number:'1.0-0' }}%</span>
          </div>
        </div>
        <div class="task-progress-circle">
          <div class="progress-circle" [style.--progress]="taskProgressPercentage + '%'">
            <svg viewBox="0 0 100 100">
              <circle cx="50" cy="50" r="45" class="progress-bg"></circle>
              <circle cx="50" cy="50" r="45" class="progress-fill" [style.stroke-dashoffset]="283 - (283 * taskProgressPercentage / 100)"></circle>
            </svg>
            <div class="progress-text">
              <span class="progress-value">{{ taskProgressPercentage | number:'1.0-0' }}%</span>
              <span class="progress-label">ComplÃ©tÃ©</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Finance Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>ğŸ’° DÃ©penses par CatÃ©gorie</h3>
      </div>
      <div class="chart-content">
        <div class="expense-category-chart">
          <div *ngFor="let item of expenseCategoryData" class="category-bar-item">
            <div class="category-label">
              <span>{{ item.category }}</span>
              <span class="category-amount">â‚¬{{ item.amount | number:'1.0-0' }}</span>
            </div>
            <div class="category-bar">
              <div class="category-bar-fill" [style.width.%]="item.percentage"></div>
            </div>
            <span class="category-percentage">{{ item.percentage | number:'1.0-0' }}%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Monthly Expense History -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>ğŸ“ˆ Ã‰volution des DÃ©penses (6 mois)</h3>
      </div>
      <div class="chart-content">
        <div class="expense-history-chart">
          <div class="history-bars">
            <div *ngFor="let item of monthlyExpenseHistory" class="history-bar-item">
              <div class="history-bar" [style.height.%]="getMaxExpense() > 0 ? (item.amount / getMaxExpense()) * 100 : 0">
                <span class="history-amount">â‚¬{{ item.amount | number:'1.0-0' }}</span>
              </div>
              <span class="history-month">{{ item.month }}</span>
            </div>
          </div>
          <div *ngIf="monthlyExpenseHistory.length === 0" class="no-data">
            <p>Aucune donnÃ©e disponible</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- App Statistics -->
  <div class="stats-section">
    <h2>ğŸ“ˆ Statistiques de l'Application</h2>
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-icon">ğŸ’¸</div>
        <div class="stat-info">
          <div class="stat-label">Total DÃ©penses</div>
          <div class="stat-value">â‚¬{{ totalExpenses | number:'1.0-0' }}</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-info">
          <div class="stat-label">Objectifs d'Ã‰pargne</div>
          <div class="stat-value">{{ totalSavingsGoals }}</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">âœ…</div>
        <div class="stat-info">
          <div class="stat-label">Objectifs Actifs</div>
          <div class="stat-value">{{ activeSavingsGoals }}</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">â¤ï¸</div>
        <div class="stat-info">
          <div class="stat-label">Enregistrements SantÃ©</div>
          <div class="stat-value">{{ totalHealthRecords }}</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-info">
          <div class="stat-label">Ã‰vÃ©nements Sociaux</div>
          <div class="stat-value">{{ totalSocialEvents }}</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon">âœ“</div>
        <div class="stat-info">
          <div class="stat-label">Total TÃ¢ches</div>
          <div class="stat-value">{{ totalTasks }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
