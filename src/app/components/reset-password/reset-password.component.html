<div class="auth-page">
  <h1 class="brand">{{ 'login.brand' | translate }}</h1>
  <p class="subtitle">{{ 'resetPassword.subtitle' | translate }}</p>

  <section class="card" aria-label="Réinitialiser le mot de passe">
    <h2 class="title">{{ 'resetPassword.title' | translate }}</h2>
    <p class="subtext">{{ 'resetPassword.desc' | translate }}</p>

    <p class="error-message" *ngIf="!token && errorMessage">{{ errorMessage }}</p>
    <p class="back-link" *ngIf="!token">
      <a routerLink="/login">{{ 'forgotPassword.backToLogin' | translate }}</a>
    </p>

    <form *ngIf="token" [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <label for="newPassword">{{ 'resetPassword.newPassword' | translate }}</label>
      <input id="newPassword" type="password" formControlName="newPassword" placeholder="••••••••"
        autocomplete="new-password" required minlength="6" aria-describedby="newPasswordHelp" />
      <div id="newPasswordHelp" class="error"
        *ngIf="form.controls['newPassword'].touched && form.controls['newPassword'].invalid">
        {{ 'login.passwordError' | translate }}
      </div>

      <label for="confirmPassword">{{ 'resetPassword.confirmPassword' | translate }}</label>
      <input id="confirmPassword" type="password" formControlName="confirmPassword" placeholder="••••••••"
        autocomplete="new-password" required aria-describedby="confirmHelp" />
      <div id="confirmHelp" class="error"
        *ngIf="form.controls['confirmPassword'].touched && form.getError('passwordMismatch')">
        {{ 'resetPassword.passwordMismatch' | translate }}
      </div>

      <p class="success-message" *ngIf="successMessage">{{ successMessage }}</p>
      <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>

      <button class="submit btn btn-primary" type="submit" [disabled]="isLoading">
        {{ isLoading ? ('common.loading' | translate) : ('resetPassword.submit' | translate) }}
      </button>
    </form>

    <p class="back-link" *ngIf="token && !successMessage">
      <a routerLink="/login">{{ 'forgotPassword.backToLogin' | translate }}</a>
    </p>
  </section>
</div>
