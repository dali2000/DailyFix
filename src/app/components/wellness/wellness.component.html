<div class="wellness-page">
  <h1>Bien-√™tre Mental et D√©veloppement Personnel</h1>

  <div class="tabs">
    <button [class.active]="activeTab === 'journal'" (click)="activeTab = 'journal'">Journal</button>
    <button [class.active]="activeTab === 'goals'" (click)="activeTab = 'goals'">Objectifs</button>
    <button [class.active]="activeTab === 'stress'" (click)="activeTab = 'stress'">Gestion du stress</button>
  </div>

  <!-- Journal Tab -->
  <div *ngIf="activeTab === 'journal'" class="tab-content">
    <div class="section-header">
      <h2>Journal intime</h2>
      <button type="button" class="btn btn-primary" (click)="showJournalForm = true">+ Nouvelle entr√©e</button>
    </div>

    <div class="journal-entries">
      <div *ngFor="let entry of journalEntries" class="entry-card">
        <div class="entry-header">
          <h4>{{ entry.title || 'Sans titre' }}</h4>
          <span class="mood">{{ getMoodEmoji(entry.mood) }}</span>
        </div>
        <p class="entry-content">{{ entry.content }}</p>
        <div class="entry-meta">
          <span>{{ entry.date | date:'full' }}</span>
          <span *ngIf="entry.tags && entry.tags.length > 0" class="tags">
            {{ entry.tags.join(', ') }}
          </span>
        </div>
        <div class="entry-actions">
          <button class="btn btn-small" (click)="editJournalEntry(entry)">Modifier</button>
          <button class="btn btn-small btn-danger" (click)="deleteJournalEntry(entry.id)">Supprimer</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Goals Tab -->
  <div *ngIf="activeTab === 'goals'" class="tab-content">
    <div class="section-header">
      <h2>Objectifs personnels</h2>
      <button type="button" class="btn btn-primary" (click)="showGoalForm = true">+ Nouvel objectif</button>
    </div>

    <div class="active-goals-section">
      <h3>Objectifs actifs</h3>
      <div class="goals-list">
        <div *ngFor="let goal of getActiveGoals()" class="goal-card">
          <div class="goal-header">
            <h4>{{ goal.title }}</h4>
            <span class="category-badge">{{ getCategoryName(goal.category) }}</span>
          </div>
          <p *ngIf="goal.description">{{ goal.description }}</p>
          <div class="goal-progress">
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="getGoalProgress(goal)"></div>
            </div>
            <div class="progress-info">
              <span>{{ getGoalProgress(goal) }}%</span>
              <input type="number" min="0" max="100" [value]="goal.progress" 
                     (change)="updateGoalProgress(goal, +$any($event.target).value)"
                     class="progress-input">
            </div>
          </div>
          <div class="goal-meta">
            <span *ngIf="goal.targetDate">Date cible: {{ goal.targetDate | date:'shortDate' }}</span>
          </div>
          <button class="btn btn-small btn-danger" (click)="deletePersonalGoal(goal.id)">Supprimer</button>
        </div>
      </div>
    </div>

    <div class="completed-goals-section">
      <h3>Objectifs compl√©t√©s</h3>
      <div class="goals-list">
        <div *ngFor="let goal of getCompletedGoals()" class="goal-card completed">
          <h4>{{ goal.title }}</h4>
          <p>{{ goal.description }}</p>
          <span class="completed-badge">‚úì Compl√©t√©</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Stress Tab -->
  <div *ngIf="activeTab === 'stress'" class="tab-content">
    <div class="stress-overview">
      <div class="stress-card">
        <h3>Niveau de stress moyen (7 derniers jours)</h3>
        <div class="stress-level-display" [style.color]="getStressLevelColor(averageStressLevel)">
          <span class="stress-value">{{ averageStressLevel }}/10</span>
        </div>
      </div>
    </div>

    <div class="stress-tips-section">
      <h3>üí° Conseils de gestion du stress</h3>
      <div class="tips-grid">
        <div *ngFor="let tip of stressTips" class="tip-card">
          {{ tip }}
        </div>
      </div>
    </div>

    <div class="section-header">
      <h2>Enregistrer le stress</h2>
      <button type="button" class="btn btn-primary" (click)="showStressForm = true">+ Nouvel enregistrement</button>
    </div>

    <div class="stress-records-section">
      <h3>Historique</h3>
      <div class="stress-records">
        <div *ngFor="let record of stressRecords" class="stress-record-card">
          <div class="stress-record-header">
            <span class="stress-level" [style.color]="getStressLevelColor(record.stressLevel)">
              Niveau: {{ record.stressLevel }}/10
            </span>
            <span class="date">{{ record.date | date:'short' }}</span>
          </div>
          <div *ngIf="record.triggers && record.triggers.length > 0" class="triggers">
            <strong>D√©clencheurs:</strong> {{ record.triggers.join(', ') }}
          </div>
          <div *ngIf="record.copingStrategies && record.copingStrategies.length > 0" class="strategies">
            <strong>Strat√©gies:</strong> {{ record.copingStrategies.join(', ') }}
          </div>
          <p *ngIf="record.notes">{{ record.notes }}</p>
        </div>
      </div>
    </div>
  </div>

  <app-modal *ngIf="showJournalForm" [title]="selectedEntry ? 'Modifier l\'entr√©e' : 'Nouvelle entr√©e'" size="lg" (closeModal)="closeJournalModal()">
    <form (ngSubmit)="selectedEntry ? updateJournalEntry() : addJournalEntry()">
      <div class="form-group">
        <label>Titre (optionnel)</label>
        <input type="text" [(ngModel)]="newEntry.title" name="title">
      </div>
      <div class="form-group">
        <label>Contenu *</label>
        <textarea [(ngModel)]="newEntry.content" name="content" rows="8" required></textarea>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Humeur</label>
          <select [(ngModel)]="newEntry.mood" name="mood">
            <option value="">S√©lectionner</option>
            <option *ngFor="let mood of moods" [value]="mood">
              {{ getMoodEmoji(mood) }} {{ mood }}
            </option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Tags (s√©par√©s par des virgules)</label>
        <input type="text" [(ngModel)]="newEntry.tags" name="tags" placeholder="gratitude, objectifs, r√©flexion">
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="closeJournalModal()">Annuler</button>
        <button type="submit" class="btn btn-primary">Enregistrer</button>
      </div>
    </form>
  </app-modal>

  <app-modal *ngIf="showGoalForm" title="Nouvel objectif" size="md" (closeModal)="closeGoalModal()">
    <form (ngSubmit)="addPersonalGoal()">
      <div class="form-group">
        <label>Titre *</label>
        <input type="text" [(ngModel)]="newGoal.title" name="title" required>
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea [(ngModel)]="newGoal.description" name="description" rows="3"></textarea>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Cat√©gorie</label>
          <select [(ngModel)]="newGoal.category" name="category">
            <option *ngFor="let cat of goalCategories" [value]="cat">{{ getCategoryName(cat) }}</option>
          </select>
        </div>
        <div class="form-group">
          <label>Date cible</label>
          <input type="date" [(ngModel)]="newGoal.targetDate" name="targetDate">
        </div>
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="closeGoalModal()">Annuler</button>
        <button type="submit" class="btn btn-primary">Cr√©er</button>
      </div>
    </form>
  </app-modal>

  <app-modal *ngIf="showStressForm" title="Nouvel enregistrement de stress" size="md" (closeModal)="closeStressModal()">
    <form (ngSubmit)="addStressRecord()">
      <div class="form-group">
        <label>Niveau de stress (1-10) *</label>
        <input type="range" min="1" max="10" [(ngModel)]="newStress.stressLevel" name="stressLevel" required>
        <span class="stress-level-value">{{ newStress.stressLevel }}/10</span>
      </div>
      <div class="form-group">
        <label>D√©clencheurs (s√©par√©s par des virgules)</label>
        <input type="text" [(ngModel)]="newStress.triggers" name="triggers" placeholder="travail, famille, finances">
      </div>
      <div class="form-group">
        <label>Strat√©gies d'adaptation (s√©par√©es par des virgules)</label>
        <input type="text" [(ngModel)]="newStress.copingStrategies" name="copingStrategies" placeholder="respiration, marche, m√©ditation">
      </div>
      <div class="form-group">
        <label>Notes</label>
        <textarea [(ngModel)]="newStress.notes" name="notes" rows="3"></textarea>
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="closeStressModal()">Annuler</button>
        <button type="submit" class="btn btn-primary">Enregistrer</button>
      </div>
    </form>
  </app-modal>
</div>

