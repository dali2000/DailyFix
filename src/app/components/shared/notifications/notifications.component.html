<div class="notifications-container">
  <button 
    class="notification-btn" 
    (click)="toggleDropdown()"
    [attr.aria-label]="('notifications.title' | translate) + (unreadCount > 0 ? ' (' + unreadCount + ' ' + ('notifications.unread' | translate) + ')' : '')"
    [title]="unreadCount > 0 ? unreadCount + ' ' + ('notifications.unread' | translate) : ('notifications.title' | translate)">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 22a2.5 2.5 0 0 0 2.45-2h-4.9A2.5 2.5 0 0 0 12 22Zm6-6V11a6 6 0 1 0-12 0v5l-2 2v1h16v-1l-2-2Z" fill="currentColor"/>
    </svg>
    <span class="notification-badge" *ngIf="unreadCount > 0">{{ unreadCount > 99 ? '99+' : unreadCount }}</span>
  </button>

  <div class="notifications-dropdown" *ngIf="showDropdown">
    <div class="dropdown-header">
      <h3>{{ 'notifications.title' | translate }}</h3>
      <button class="clear-btn" *ngIf="notifications.length > 0" (click)="clearAll()" [title]="'notifications.clearAll' | translate">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="notifications-list">
      <div 
        *ngFor="let notification of notifications" 
        class="notification-item"
        [class.unread]="!notification.read"
        (click)="markAsRead(notification)">
        <div class="notification-icon">{{ getNotificationIcon(notification.type) }}</div>
        <div class="notification-content">
          <div class="notification-title">{{ notification.title }}</div>
          <div class="notification-message">{{ notification.message }}</div>
          <div class="notification-time">{{ formatTime(notification.timestamp) }}</div>
        </div>
        <button 
          class="remove-btn" 
          (click)="removeNotification(notification, $event)"
          [attr.aria-label]="'notifications.removeLabel' | translate">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="empty-state" *ngIf="notifications.length === 0">
        <p>{{ 'notifications.noNotifications' | translate }}</p>
      </div>
    </div>
  </div>
</div>

