import{O as g,a,b as l}from"./chunk-X4VNRQJ7.js";var h=(()=>{class d{constructor(){this.expenses=[],this.budgets=[],this.savingsGoals=[],this.salaries=[],this.loadFromStorage()}getExpenses(){return[...this.expenses]}addExpense(t){let e=l(a({},t),{id:this.generateId()});return this.expenses.push(e),this.saveToStorage(),e}updateExpense(t,e){let s=this.expenses.findIndex(n=>n.id===t);return s===-1?null:(this.expenses[s]=a(a({},this.expenses[s]),e),this.saveToStorage(),this.expenses[s])}deleteExpense(t){let e=this.expenses.findIndex(s=>s.id===t);return e===-1?!1:(this.expenses.splice(e,1),this.saveToStorage(),!0)}getExpensesForMonth(t,e){return this.expenses.filter(s=>{let n=new Date(s.date);return n.getFullYear()===t&&n.getMonth()===e})}getTotalExpensesForMonth(t,e){return this.getExpensesForMonth(t,e).reduce((s,n)=>s+n.amount,0)}getExpensesByCategory(t){return this.expenses.filter(e=>e.category===t)}getBudgets(){return[...this.budgets]}addBudget(t){let e=l(a({},t),{id:this.generateId(),spent:0});return this.budgets.push(e),this.saveToStorage(),e}updateBudget(t,e){let s=this.budgets.findIndex(n=>n.id===t);return s===-1?null:(this.budgets[s]=a(a({},this.budgets[s]),e),this.saveToStorage(),this.budgets[s])}deleteBudget(t){let e=this.budgets.findIndex(s=>s.id===t);return e===-1?!1:(this.budgets.splice(e,1),this.saveToStorage(),!0)}getMonthlyBudget(){return this.budgets.filter(e=>e.period==="monthly").reduce((e,s)=>e+s.limit,0)}getRemainingBudget(){let t=new Date,e=this.getTotalExpensesForMonth(t.getFullYear(),t.getMonth());return this.getMonthlyBudget()-e}getSalaries(){return[...this.salaries]}addSalary(t){let e=l(a({},t),{id:this.generateId()});return this.salaries.push(e),this.saveToStorage(),e}updateSalary(t,e){let s=this.salaries.findIndex(n=>n.id===t);return s===-1?null:(this.salaries[s]=a(a({},this.salaries[s]),e),this.saveToStorage(),this.salaries[s])}deleteSalary(t){let e=this.salaries.findIndex(s=>s.id===t);return e===-1?!1:(this.salaries.splice(e,1),this.saveToStorage(),!0)}getMonthlySalary(){let t=new Date,s=this.salaries.filter(i=>{let o=new Date(i.date);return i.period==="monthly"&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()}).reduce((i,o)=>i+o.amount,0),r=this.salaries.filter(i=>{let o=new Date(i.date);return i.period==="yearly"&&o.getFullYear()===t.getFullYear()}).reduce((i,o)=>i+o.amount/12,0);return s+r}getRemainingBalance(){let t=this.getMonthlySalary(),e=new Date,s=this.getTotalExpensesForMonth(e.getFullYear(),e.getMonth());return t-s}getSavingsGoals(){return[...this.savingsGoals]}addSavingsGoal(t){let e=l(a({},t),{id:this.generateId()});return this.savingsGoals.push(e),this.saveToStorage(),e}updateSavingsGoal(t,e){let s=this.savingsGoals.findIndex(n=>n.id===t);return s===-1?null:(this.savingsGoals[s]=a(a({},this.savingsGoals[s]),e),this.saveToStorage(),this.savingsGoals[s])}deleteSavingsGoal(t){let e=this.savingsGoals.findIndex(s=>s.id===t);return e===-1?!1:(this.savingsGoals.splice(e,1),this.saveToStorage(),!0)}getSavingsSuggestions(){let t=[],e=new Date,s=this.getTotalExpensesForMonth(e.getFullYear(),e.getMonth());return s>0&&(this.getExpensesByCategory("food").reduce((i,o)=>i+o.amount,0)>s*.3&&t.push("Consid\xE9rez r\xE9duire les d\xE9penses alimentaires en cuisinant plus \xE0 la maison"),this.getExpensesByCategory("leisure").reduce((i,o)=>i+o.amount,0)>s*.2&&t.push("R\xE9duisez les d\xE9penses de loisirs en cherchant des activit\xE9s gratuites")),t}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveToStorage(){localStorage.setItem("dailyFix_expenses",JSON.stringify(this.expenses)),localStorage.setItem("dailyFix_budgets",JSON.stringify(this.budgets)),localStorage.setItem("dailyFix_savingsGoals",JSON.stringify(this.savingsGoals)),localStorage.setItem("dailyFix_salaries",JSON.stringify(this.salaries))}loadFromStorage(){let t=localStorage.getItem("dailyFix_expenses"),e=localStorage.getItem("dailyFix_budgets"),s=localStorage.getItem("dailyFix_savingsGoals"),n=localStorage.getItem("dailyFix_salaries");t&&(this.expenses=JSON.parse(t).map(r=>l(a({},r),{date:new Date(r.date)}))),e&&(this.budgets=JSON.parse(e)),s&&(this.savingsGoals=JSON.parse(s).map(r=>l(a({},r),{deadline:r.deadline?new Date(r.deadline):void 0}))),n&&(this.salaries=JSON.parse(n).map(r=>l(a({},r),{date:new Date(r.date)})))}static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275prov=g({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})();export{h as a};
