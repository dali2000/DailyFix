import{a as A}from"./chunk-RPAO4CCE.js";import{c as z,f as F,l as U,m as D,n as j,t as N}from"./chunk-HIUILC2L.js";import{$ as d,Aa as P,Ba as E,E as u,Ea as k,F as h,L as a,La as T,M as m,P as v,R as g,Ra as w,Sa as I,T as C,V as e,W as t,X as f,aa as _,fa as i,ia as x,la as S,ma as b,na as M,pa as O,y}from"./chunk-D6OKYDWX.js";function V(r,p){if(r&1&&(e(0,"option",24),i(1),t()),r&2){let n=p.$implicit;g("value",n.code),a(),x(" ",n.label," (",n.symbol,") ")}}function L(r,p){if(r&1&&(e(0,"p"),i(1),t()),r&2){let n=_();a(),x("",n.currentUser.fullName," - ",n.currentUser.email,"")}}function W(r,p){r&1&&(e(0,"p"),i(1,"Chargement..."),t())}var X=(()=>{class r{constructor(n,c,o,s){this.themeService=n,this.authService=c,this.currencyService=o,this.router=s,this.currentTheme="light",this.currentUser=null,this.selectedCurrencyCode="EUR"}get currencies(){return this.currencyService.currencies}ngOnInit(){this.themeSubscription=this.themeService.theme$.subscribe(n=>{this.currentTheme=n}),this.userSubscription=this.authService.currentUser$.subscribe(n=>{this.currentUser=n}),this.selectedCurrencyCode=this.currencyService.getSelectedCurrencyCode(),this.currencySubscription=this.currencyService.selectedCurrency$.subscribe(n=>{this.selectedCurrencyCode=n})}ngOnDestroy(){this.themeSubscription?.unsubscribe(),this.userSubscription?.unsubscribe(),this.currencySubscription?.unsubscribe()}onCurrencyChange(n){this.authService.getCurrentUser()?this.authService.updateProfile({currency:n}).subscribe({error:c=>console.error("Erreur lors de la sauvegarde de la devise",c)}):this.currencyService.setSelectedCurrency(n)}toggleTheme(){this.themeService.toggleTheme()}setTheme(n){this.themeService.setTheme(n)}logout(){this.authService.logout(),this.router.navigate(["/login"])}static{this.\u0275fac=function(c){return new(c||r)(m(A),m(I),m(w),m(T))}}static{this.\u0275cmp=y({type:r,selectors:[["app-settings"]],standalone:!0,features:[O],decls:72,vars:8,consts:[[1,"settings-page"],[1,"settings-container"],[1,"settings-section"],[1,"setting-item"],[1,"setting-info"],[1,"setting-control"],[1,"theme-toggle"],["aria-label","Mode clair",1,"theme-option",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","5"],["x1","12","y1","1","x2","12","y2","3"],["x1","12","y1","21","x2","12","y2","23"],["x1","4.22","y1","4.22","x2","5.64","y2","5.64"],["x1","18.36","y1","18.36","x2","19.78","y2","19.78"],["x1","1","y1","12","x2","3","y2","12"],["x1","21","y1","12","x2","23","y2","12"],["x1","4.22","y1","19.78","x2","5.64","y2","18.36"],["x1","18.36","y1","5.64","x2","19.78","y2","4.22"],["aria-label","Mode sombre",1,"theme-option",3,"click"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],["id","currency-select",1,"currency-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],[3,"value"]],template:function(c,o){c&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Param\xE8tres"),t(),e(4,"section",2)(5,"h2"),i(6,"Apparence"),t(),e(7,"div",3)(8,"div",4)(9,"h3"),i(10,"Th\xE8me"),t(),e(11,"p"),i(12,"Choisissez entre le mode clair et le mode sombre"),t()(),e(13,"div",5)(14,"div",6)(15,"button",7),d("click",function(){return o.setTheme("light")}),u(),e(16,"svg",8),f(17,"circle",9)(18,"line",10)(19,"line",11)(20,"line",12)(21,"line",13)(22,"line",14)(23,"line",15)(24,"line",16)(25,"line",17),t(),h(),e(26,"span"),i(27,"Clair"),t()(),e(28,"button",18),d("click",function(){return o.setTheme("dark")}),u(),e(29,"svg",8),f(30,"path",19),t(),h(),e(31,"span"),i(32,"Sombre"),t()()()()()(),e(33,"section",2)(34,"h2"),i(35,"Portefeuille"),t(),e(36,"div",3)(37,"div",4)(38,"h3"),i(39,"Devise du portefeuille"),t(),e(40,"p"),i(41,"Devise d'affichage pour les montants (Finance)"),t()(),e(42,"div",5)(43,"select",20),M("ngModelChange",function(l){return b(o.selectedCurrencyCode,l)||(o.selectedCurrencyCode=l),l}),d("ngModelChange",function(l){return o.onCurrencyChange(l)}),v(44,V,2,3,"option",21),t()()()(),e(45,"section",2)(46,"h2"),i(47,"Compte"),t(),e(48,"div",3)(49,"div",4)(50,"h3"),i(51,"Informations utilisateur"),t(),v(52,L,2,2,"p",22)(53,W,2,0,"p",22),t()(),e(54,"div",3)(55,"div",4)(56,"h3"),i(57,"D\xE9connexion"),t(),e(58,"p"),i(59,"D\xE9connectez-vous de votre compte"),t()(),e(60,"div",5)(61,"button",23),d("click",function(){return o.logout()}),i(62," Se d\xE9connecter "),t()()()(),e(63,"section",2)(64,"h2"),i(65,"\xC0 propos"),t(),e(66,"div",3)(67,"div",4)(68,"h3"),i(69,"Version"),t(),e(70,"p"),i(71,"DailyFix v1.0.0"),t()()()()()()),c&2&&(a(15),C("active",o.currentTheme==="light"),a(13),C("active",o.currentTheme==="dark"),a(15),S("ngModel",o.selectedCurrencyCode),a(),g("ngForOf",o.currencies),a(8),g("ngIf",o.currentUser),a(),g("ngIf",!o.currentUser))},dependencies:[k,P,E,N,D,j,U,z,F],styles:[".settings-page[_ngcontent-%COMP%]{padding:var(--notion-spacing-lg);max-width:800px;margin:0 auto;min-height:calc(100vh - 60px)}.settings-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--notion-spacing-xl);font-size:32px;font-weight:700}.settings-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--notion-spacing-xl)}.settings-section[_ngcontent-%COMP%]{background:var(--notion-bg);border:1px solid var(--notion-border);border-radius:var(--notion-radius-md);padding:var(--notion-spacing-lg)}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:var(--notion-spacing-lg);color:var(--notion-text-primary)}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:var(--notion-spacing-md) 0;border-bottom:1px solid var(--notion-border)}.setting-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.setting-info[_ngcontent-%COMP%]{flex:1;margin-right:var(--notion-spacing-lg)}.setting-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:var(--notion-spacing-xs);color:var(--notion-text-primary)}.setting-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--notion-text-secondary);margin:0}.setting-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--notion-spacing)}.currency-select[_ngcontent-%COMP%]{min-width:200px;padding:var(--notion-spacing-sm) var(--notion-spacing-md);border:1px solid var(--notion-border);border-radius:var(--notion-radius);background:var(--notion-bg);color:var(--notion-text-primary);font-size:14px}.theme-toggle[_ngcontent-%COMP%]{display:flex;gap:var(--notion-spacing-sm);background:var(--notion-bg-secondary);border-radius:var(--notion-radius);padding:4px}.theme-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--notion-spacing-xs);padding:var(--notion-spacing-sm) var(--notion-spacing-md);border:none;background:transparent;border-radius:var(--notion-radius-sm);cursor:pointer;transition:all .2s ease;color:var(--notion-text-secondary);font-size:14px;font-weight:500}.theme-option[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.theme-option.active[_ngcontent-%COMP%]{background:var(--notion-text-primary);color:#929292!important}.dark-theme[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]{color:var(--notion-text-primary)!important}.dark-theme[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)!important;color:var(--notion-text-primary)!important}.dark-theme[_ngcontent-%COMP%]   .theme-option.active[_ngcontent-%COMP%]{background:#ffffff26!important;color:#fff!important}.theme-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}@media (max-width: 768px){.settings-page[_ngcontent-%COMP%]{padding:var(--notion-spacing)}.settings-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.setting-item[_ngcontent-%COMP%]{flex-direction:column;gap:var(--notion-spacing)}.setting-info[_ngcontent-%COMP%]{margin-right:0}.setting-control[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.theme-toggle[_ngcontent-%COMP%]{width:100%}.theme-option[_ngcontent-%COMP%]{flex:1;justify-content:center}}"]})}}return r})();export{X as SettingsComponent};
