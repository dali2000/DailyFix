import{a as G,c as Y,d as H,e as J,f as K,g as Q,l as X,m as Z,n as $,q as ee,t as te}from"./chunk-Q5YXRQHR.js";import{$ as p,A as g,B as _,Ca as N,Da as W,Ea as D,Ha as z,K as i,Ka as j,L as E,O as b,P as k,Q as u,Ra as R,U as n,V as t,W as I,Z as S,Za as q,_ as x,bb as L,cb as ne,ea as h,fa as r,ga as c,ha as O,ia as f,la as V,ma as C,na as M,oa as y,q as U,qa as F,sa as s,t as T,ta as l,ua as B,w as A}from"./chunk-2GVYHNTM.js";import"./chunk-POLL2CVR.js";var ie=(()=>{class o{constructor(e){this.apiService=e}getStats(){return this.apiService.get("/admin/stats")}getUsers(e=1,d=10,a=""){let m={page:e,limit:d};return a&&(m.search=a),this.apiService.get("/admin/users",m)}getUserById(e){return this.apiService.get(`/admin/users/${e}`)}createUser(e){return this.apiService.post("/admin/users",e)}updateUser(e,d){return this.apiService.put(`/admin/users/${e}`,d)}deleteUser(e){return this.apiService.delete(`/admin/users/${e}`)}static{this.\u0275fac=function(d){return new(d||o)(T(q))}}static{this.\u0275prov=U({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function oe(o,v){if(o&1){let e=S();n(0,"div",30)(1,"span"),r(2),t(),n(3,"button",31),s(4,"translate"),x("click",function(){g(e);let a=p();return _(a.dismissMessages())}),r(5,"\xD7"),t()()}if(o&2){let e=p();i(2),c(e.error),i(),k("aria-label",l(4,2,"common.close"))}}function se(o,v){if(o&1){let e=S();n(0,"div",32)(1,"span"),r(2),t(),n(3,"button",31),s(4,"translate"),x("click",function(){g(e);let a=p();return _(a.successMessage=null)}),r(5,"\xD7"),t()()}if(o&2){let e=p();i(2),c(e.successMessage),i(),k("aria-label",l(4,2,"common.close"))}}function le(o,v){o&1&&(n(0,"div",35),I(1,"div",36),n(2,"div",37),I(3,"div",38)(4,"div",39),t()())}function de(o,v){if(o&1&&(n(0,"div",33),b(1,le,5,0,"div",34),t()),o&2){let e=p();i(),u("ngForOf",e.skeletonCount)}}function ce(o,v){if(o&1&&(n(0,"div",40)(1,"div",41)(2,"div",42),r(3,"\u{1F465}"),t(),n(4,"div",37)(5,"h3"),r(6),s(7,"translate"),t(),n(8,"div",43),r(9),t(),n(10,"div",44)(11,"span"),r(12),s(13,"translate"),t(),n(14,"span"),r(15),s(16,"translate"),t()()()(),n(17,"div",45)(18,"div",42),r(19,"\u2705"),t(),n(20,"div",37)(21,"h3"),r(22),s(23,"translate"),t(),n(24,"div",43),r(25),t(),n(26,"div",44)(27,"span"),r(28),s(29,"translate"),t(),n(30,"span"),r(31),s(32,"translate"),t()()()(),n(33,"div",46)(34,"div",42),r(35,"\u{1F4C5}"),t(),n(36,"div",37)(37,"h3"),r(38),s(39,"translate"),t(),n(40,"div",43),r(41),t(),n(42,"div",44)(43,"span"),r(44),s(45,"translate"),t()()()(),n(46,"div",47)(47,"div",42),r(48,"\u2764\uFE0F"),t(),n(49,"div",37)(50,"h3"),r(51),s(52,"translate"),t(),n(53,"div",43),r(54),t(),n(55,"div",44)(56,"span"),r(57),s(58,"translate"),t(),n(59,"span"),r(60),s(61,"translate"),t()()()(),n(62,"div",48)(63,"div",42),r(64,"\u{1F4B0}"),t(),n(65,"div",37)(66,"h3"),r(67),s(68,"translate"),t(),n(69,"div",43),r(70),t(),n(71,"div",44)(72,"span"),r(73),s(74,"translate"),t(),n(75,"span"),r(76),s(77,"translate"),t()()()(),n(78,"div",49)(79,"div",42),r(80,"\u{1F9D8}"),t(),n(81,"div",37)(82,"h3"),r(83),s(84,"translate"),t(),n(85,"div",43),r(86),t(),n(87,"div",44)(88,"span"),r(89),s(90,"translate"),t(),n(91,"span"),r(92),s(93,"translate"),t()()()(),n(94,"div",50)(95,"div",42),r(96,"\u{1F465}"),t(),n(97,"div",37)(98,"h3"),r(99),s(100,"translate"),t(),n(101,"div",43),r(102),t(),n(103,"div",44)(104,"span"),r(105),s(106,"translate"),t()()()()()),o&2){let e=p();i(6),c(l(7,37,"admin.users")),i(3),c(e.stats.users.total),i(3),f("+",e.stats.users.newThisMonth," ",l(13,39,"admin.thisMonth"),""),i(3),f("+",e.stats.users.newThisWeek," ",l(16,41,"admin.thisWeek"),""),i(7),c(l(23,43,"admin.tasks")),i(3),c(e.stats.tasks.total),i(3),f("",e.stats.tasks.completed," ",l(29,45,"admin.completedCount"),""),i(3),f("",e.stats.tasks.completionRate,"% ",l(32,47,"admin.completionRate"),""),i(7),c(l(39,49,"admin.events")),i(3),c(e.stats.events.total),i(3),f("",e.stats.events.upcoming," ",l(45,51,"admin.upcoming"),""),i(7),c(l(52,53,"admin.health")),i(3),c(e.stats.health.meals+e.stats.health.activities+e.stats.health.sleepRecords),i(3),f("",e.stats.health.meals," ",l(58,55,"admin.meals"),""),i(3),f("",e.stats.health.activities," ",l(61,57,"admin.activities"),""),i(7),c(l(68,59,"admin.finance")),i(3),c(e.stats.finance.expenses),i(3),f("",e.stats.finance.budgets," ",l(74,61,"admin.budgets"),""),i(3),f("",e.stats.finance.savingsGoals," ",l(77,63,"admin.savingsGoals"),""),i(7),c(l(84,65,"admin.wellness")),i(3),c(e.stats.wellness.journalEntries+e.stats.wellness.personalGoals),i(3),f("",e.stats.wellness.journalEntries," ",l(90,67,"admin.journals"),""),i(3),f("",e.stats.wellness.personalGoals," ",l(93,69,"admin.savingsGoals"),""),i(7),c(l(100,71,"admin.socialEvents")),i(3),c(e.stats.social.events),i(3),c(l(106,73,"admin.socialEvents"))}}function me(o,v){if(o&1&&(n(0,"div",54)(1,"span",55),r(2),t(),n(3,"span",56),r(4),t(),n(5,"span",57),r(6),t(),n(7,"span",58),r(8),s(9,"date"),t()()),o&2){let e=v.$implicit,d=p(2);i(2),c(e.fullName),i(2),c(e.email),i(),u("ngClass",d.getRoleBadgeClass(e.role)),i(),c(e.role),i(2),c(B(9,5,e.createdAt,"short"))}}function pe(o,v){if(o&1&&(n(0,"section",51)(1,"h2"),r(2),s(3,"translate"),t(),n(4,"div",52),b(5,me,10,8,"div",53),t()()),o&2){let e=p();i(2),c(l(3,2,"admin.recentSignups")),i(3),u("ngForOf",e.recentUsers)}}function ue(o,v){o&1&&(n(0,"div",59),I(1,"span",60),n(2,"span"),r(3,"Chargement des utilisateurs..."),t()())}function ge(o,v){if(o&1){let e=S();n(0,"tr")(1,"td",66),r(2),t(),n(3,"td",67),r(4),t(),n(5,"td",68),r(6),t(),n(7,"td",69)(8,"span",57),r(9),t()(),n(10,"td",70),r(11),t(),n(12,"td",71),r(13),s(14,"date"),t(),n(15,"td",72)(16,"button",73),x("click",function(){let a=g(e).$implicit,m=p(2);return _(m.openEditModal(a))}),r(17,"Modifier"),t(),n(18,"button",74),x("click",function(){let a=g(e).$implicit,m=p(2);return _(m.deleteUser(a))}),r(19,"Supprimer"),t()()()}if(o&2){let e=v.$implicit,d=p(2);i(2),c(e.id),i(2),c(e.fullName),i(2),c(e.email),i(2),u("ngClass",d.getRoleBadgeClass(e.role)),i(),c(e.role),i(2),c(e.provider),i(2),c(B(14,7,e.createdAt,"short"))}}function _e(o,v){if(o&1){let e=S();n(0,"div",75)(1,"button",76),x("click",function(){g(e);let a=p(2);return _(a.changePage(a.currentPage-1))}),r(2),s(3,"translate"),t(),n(4,"span",77),r(5),s(6,"translate"),s(7,"translate"),t(),n(8,"button",78),x("click",function(){g(e);let a=p(2);return _(a.changePage(a.currentPage+1))}),r(9),s(10,"translate"),t()()}if(o&2){let e=p(2);i(),u("disabled",e.currentPage===1),i(),O(" \u2190 ",l(3,9,"common.previous")," "),i(3),V("",l(6,11,"admin.page")," ",e.currentPage," / ",e.totalPages," (",e.totalUsers," ",l(7,13,"admin.usersCount"),")"),i(3),u("disabled",e.currentPage===e.totalPages),i(),O(" ",l(10,15,"common.next")," \u2192 ")}}function ve(o,v){if(o&1&&(n(0,"div",61)(1,"div",62)(2,"table",63)(3,"thead")(4,"tr")(5,"th"),r(6),s(7,"translate"),t(),n(8,"th"),r(9),s(10,"translate"),t(),n(11,"th"),r(12),s(13,"translate"),t(),n(14,"th"),r(15),s(16,"translate"),t(),n(17,"th"),r(18),s(19,"translate"),t(),n(20,"th"),r(21),s(22,"translate"),t(),n(23,"th"),r(24),s(25,"translate"),t()()(),n(26,"tbody"),b(27,ge,20,10,"tr",64),t()()(),b(28,_e,11,17,"div",65),t()),o&2){let e=p();i(6),c(l(7,9,"admin.id")),i(3),c(l(10,11,"admin.nom")),i(3),c(l(13,13,"admin.email")),i(3),c(l(16,15,"admin.role")),i(3),c(l(19,17,"admin.provider")),i(3),c(l(22,19,"admin.signupDate")),i(3),c(l(25,21,"tasks.actions")),i(3),u("ngForOf",e.users),i(),u("ngIf",e.totalPages>1)}}function xe(o,v){if(o&1){let e=S();n(0,"p"),r(1,"Essayez avec d'autres termes ou "),n(2,"button",82),x("click",function(){g(e);let a=p(2);return a.searchTerm="",_(a.searchUsers())}),r(3,"effacer la recherche"),t(),r(4,"."),t()}}function be(o,v){if(o&1){let e=S();n(0,"button",21),x("click",function(){g(e);let a=p(2);return _(a.openCreateModal())}),r(1,"Cr\xE9er le premier utilisateur"),t()}}function fe(o,v){if(o&1&&(n(0,"div",79)(1,"p"),r(2,"Aucun utilisateur trouv\xE9."),t(),b(3,xe,5,0,"p",80)(4,be,2,0,"button",81),t()),o&2){let e=p();i(3),u("ngIf",e.searchTerm),i(),u("ngIf",!e.searchTerm)}}function he(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function Ce(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function Me(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function ye(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function Pe(o,v){if(o&1){let e=S();n(0,"div",83),x("click",function(){g(e);let a=p();return _(a.closeModal())}),n(1,"div",84),x("click",function(a){return g(e),_(a.stopPropagation())}),n(2,"div",85)(3,"h3",86),r(4),s(5,"translate"),t(),n(6,"button",87),s(7,"translate"),x("click",function(){g(e);let a=p();return _(a.closeModal())}),r(8,"\xD7"),t()(),n(9,"div",88)(10,"form",89,0),x("ngSubmit",function(){g(e);let a=p();return _(a.createUser())}),n(12,"div",90)(13,"label",91),r(14),s(15,"translate"),t(),n(16,"input",92,1),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.fullName,a)||(m.userForm.fullName=a),_(a)}),t(),b(18,he,3,3,"span",93),t(),n(19,"div",90)(20,"label",94),r(21),s(22,"translate"),t(),n(23,"input",95,2),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.email,a)||(m.userForm.email=a),_(a)}),t(),b(25,Ce,3,3,"span",93),t(),n(26,"div",90)(27,"label",96),r(28),s(29,"translate"),t(),n(30,"input",97,3),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.password,a)||(m.userForm.password=a),_(a)}),t(),b(32,Me,3,3,"span",93),t(),n(33,"div",90)(34,"label",98),r(35),s(36,"translate"),t(),n(37,"select",99,4),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.role,a)||(m.userForm.role=a),_(a)}),n(39,"option",100),r(40),s(41,"translate"),t(),n(42,"option",101),r(43),s(44,"translate"),t()(),b(45,ye,3,3,"span",93),t(),n(46,"div",102)(47,"button",103),x("click",function(){g(e);let a=p();return _(a.closeModal())}),r(48),s(49,"translate"),t(),n(50,"button",104),r(51),s(52,"translate"),t()()()()()()}if(o&2){let e=h(11),d=h(17),a=h(24),m=h(31),P=h(38),w=p();i(4),c(l(5,18,"admin.createUser")),i(2),k("aria-label",l(7,20,"common.close")),i(8),O("",l(15,22,"admin.fullName")," *"),i(2),C("ngModel",w.userForm.fullName),i(2),u("ngIf",d.invalid&&(d.touched||e.submitted)),i(3),O("",l(22,24,"admin.email")," *"),i(2),C("ngModel",w.userForm.email),i(2),u("ngIf",a.invalid&&(a.touched||e.submitted)),i(3),c(l(29,26,"admin.password")),i(2),C("ngModel",w.userForm.password),i(2),u("ngIf",m.invalid&&(m.touched||e.submitted)),i(3),c(l(36,28,"admin.role")),i(2),C("ngModel",w.userForm.role),i(3),c(l(41,30,"admin.userOption")),i(3),c(l(44,32,"admin.adminOption")),i(2),u("ngIf",P.invalid&&(P.touched||e.submitted)),i(3),c(l(49,34,"common.cancel")),i(3),c(l(52,36,"common.create"))}}function we(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function Se(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function Oe(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function ke(o,v){o&1&&(n(0,"span",105),r(1),s(2,"translate"),t()),o&2&&(i(),c(l(2,1,"validation.required")))}function Ee(o,v){if(o&1){let e=S();n(0,"div",106),x("click",function(){g(e);let a=p();return _(a.closeModal())}),n(1,"div",84),x("click",function(a){return g(e),_(a.stopPropagation())}),n(2,"div",85)(3,"h3",107),r(4),s(5,"translate"),t(),n(6,"button",87),s(7,"translate"),x("click",function(){g(e);let a=p();return _(a.closeModal())}),r(8,"\xD7"),t()(),n(9,"div",88)(10,"form",89,5),x("ngSubmit",function(){g(e);let a=p();return _(a.updateUser())}),n(12,"div",90)(13,"label",108),r(14),s(15,"translate"),t(),n(16,"input",109,6),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.fullName,a)||(m.userForm.fullName=a),_(a)}),t(),b(18,we,3,3,"span",93),t(),n(19,"div",90)(20,"label",110),r(21),s(22,"translate"),t(),n(23,"input",111,7),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.email,a)||(m.userForm.email=a),_(a)}),t(),b(25,Se,3,3,"span",93),t(),n(26,"div",90)(27,"label",112),r(28),s(29,"translate"),t(),n(30,"input",113,8),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.password,a)||(m.userForm.password=a),_(a)}),t(),b(32,Oe,3,3,"span",93),t(),n(33,"div",90)(34,"label",114),r(35),s(36,"translate"),t(),n(37,"select",115,9),y("ngModelChange",function(a){g(e);let m=p();return M(m.userForm.role,a)||(m.userForm.role=a),_(a)}),n(39,"option",100),r(40),s(41,"translate"),t(),n(42,"option",101),r(43),s(44,"translate"),t()(),b(45,ke,3,3,"span",93),t(),n(46,"div",102)(47,"button",103),x("click",function(){g(e);let a=p();return _(a.closeModal())}),r(48),s(49,"translate"),t(),n(50,"button",104),r(51),s(52,"translate"),t()()()()()()}if(o&2){let e=h(11),d=h(17),a=h(24),m=h(31),P=h(38),w=p();i(4),c(l(5,18,"admin.editUser")),i(2),k("aria-label",l(7,20,"common.close")),i(8),O("",l(15,22,"admin.fullName")," *"),i(2),C("ngModel",w.userForm.fullName),i(2),u("ngIf",d.invalid&&(d.touched||e.submitted)),i(3),O("",l(22,24,"admin.email")," *"),i(2),C("ngModel",w.userForm.email),i(2),u("ngIf",a.invalid&&(a.touched||e.submitted)),i(3),c(l(29,26,"admin.newPasswordHint")),i(2),C("ngModel",w.userForm.password),i(2),u("ngIf",m.invalid&&(m.touched||e.submitted)),i(3),c(l(36,28,"admin.role")),i(2),C("ngModel",w.userForm.role),i(3),c(l(41,30,"admin.userOption")),i(3),c(l(44,32,"admin.adminOption")),i(2),u("ngIf",P.invalid&&(P.touched||e.submitted)),i(3),c(l(49,34,"common.cancel")),i(3),c(l(52,36,"common.save"))}}var We=(()=>{class o{get recentUsers(){return this.stats?.users?.recent??[]}constructor(e,d,a){this.adminService=e,this.authService=d,this.router=a,this.stats=null,this.users=[],this.loadingStats=!1,this.loadingUsers=!1,this.error=null,this.successMessage=null,this.currentPage=1,this.totalPages=1,this.totalUsers=0,this.limit=10,this.searchTerm="",this.selectedUser=null,this.showUserModal=!1,this.showCreateModal=!1,this.editMode=!1,this.userForm={fullName:"",email:"",password:"",role:"user"},this.skeletonCount=[1,2,3,4,5,6,7]}ngOnInit(){let e=this.authService.getCurrentUser();if(!e||e.role!=="admin"){this.router.navigate(["/home"]);return}this.loadStats(),this.loadUsers()}loadStats(){this.loadingStats=!0,this.error=null,this.adminService.getStats().subscribe({next:e=>{e.success&&(this.stats=e.data),this.loadingStats=!1},error:e=>{console.error("Error loading stats:",e);let d=e?.error?.error||e?.error?.message||e?.message||"Erreur lors du chargement des statistiques";this.error=d,this.loadingStats=!1}})}loadUsers(){this.loadingUsers=!0,this.error=null,this.adminService.getUsers(this.currentPage,this.limit,this.searchTerm).subscribe({next:e=>{e.success&&(this.users=e.data.users,this.totalPages=e.data.pagination.totalPages,this.totalUsers=e.data.pagination.total),this.loadingUsers=!1},error:e=>{console.error("Error loading users:",e),this.error=e?.error?.message||e?.message||"Erreur lors du chargement des utilisateurs",this.loadingUsers=!1}})}showSuccess(e){this.successMessage=e,setTimeout(()=>this.successMessage=null,4e3)}dismissMessages(){this.error=null,this.successMessage=null}searchUsers(){this.currentPage=1,this.loadUsers()}changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadUsers())}openCreateModal(){this.userForm={fullName:"",email:"",password:"",role:"user"},this.editMode=!1,this.showCreateModal=!0}openEditModal(e){this.selectedUser=e,this.userForm={fullName:e.fullName,email:e.email,password:"",role:e.role},this.editMode=!0,this.showUserModal=!0}closeModal(){this.showUserModal=!1,this.showCreateModal=!1,this.selectedUser=null}createUser(){if(!this.userForm.fullName||!this.userForm.email){this.error="Veuillez remplir tous les champs obligatoires";return}this.loadingUsers=!0,this.adminService.createUser(this.userForm).subscribe({next:e=>{e.success&&(this.closeModal(),this.loadUsers(),this.loadStats(),this.showSuccess("Utilisateur cr\xE9\xE9 avec succ\xE8s")),this.loadingUsers=!1},error:e=>{this.error=e?.error?.message||e?.message||"Erreur lors de la cr\xE9ation de l'utilisateur",this.loadingUsers=!1}})}updateUser(){if(!this.selectedUser)return;this.loadingUsers=!0;let e={fullName:this.userForm.fullName,email:this.userForm.email,role:this.userForm.role};this.userForm.password&&(e.password=this.userForm.password),this.adminService.updateUser(this.selectedUser.id,e).subscribe({next:d=>{d.success&&(this.closeModal(),this.loadUsers(),this.loadStats(),this.showSuccess("Utilisateur mis \xE0 jour avec succ\xE8s")),this.loadingUsers=!1},error:d=>{this.error=d?.error?.message||d?.message||"Erreur lors de la mise \xE0 jour de l'utilisateur",this.loadingUsers=!1}})}deleteUser(e){confirm(`\xCAtes-vous s\xFBr de vouloir supprimer l'utilisateur ${e.fullName} ? Toutes ses donn\xE9es seront supprim\xE9es.`)&&(this.loadingUsers=!0,this.adminService.deleteUser(e.id).subscribe({next:d=>{d.success&&(this.loadUsers(),this.loadStats(),this.showSuccess("Utilisateur supprim\xE9 avec succ\xE8s")),this.loadingUsers=!1},error:d=>{this.error=d?.error?.message||d?.message||"Erreur lors de la suppression de l'utilisateur",this.loadingUsers=!1}}))}getRoleBadgeClass(e){return e==="admin"?"badge-admin":"badge-user"}static{this.\u0275fac=function(d){return new(d||o)(E(ie),E(L),E(R))}}static{this.\u0275cmp=A({type:o,selectors:[["app-admin"]],standalone:!0,features:[F],decls:32,vars:20,consts:[["createUserForm","ngForm"],["createFullName","ngModel"],["createEmail","ngModel"],["createPassword","ngModel"],["createRole","ngModel"],["editUserForm","ngForm"],["editFullName","ngModel"],["editEmail","ngModel"],["editPassword","ngModel"],["editRole","ngModel"],[1,"admin-dashboard"],[1,"admin-header"],[1,"btn-back",3,"click"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["aria-label","Statistiques",1,"stats-section"],["class","stats-grid stats-skeleton",4,"ngIf"],["class","stats-grid",4,"ngIf"],["class","recent-section","aria-label","Inscriptions r\xE9centes",4,"ngIf"],["aria-label","Gestion des utilisateurs",1,"users-section"],[1,"section-header"],["type","button",1,"btn-primary",3,"click"],[1,"search-bar"],["type","search","placeholder","Rechercher par nom ou email...","aria-label","Rechercher un utilisateur",3,"ngModelChange","keyup.enter","ngModel"],["type","button",3,"click"],["class","loading loading-users",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal","role","dialog","aria-modal","true","aria-labelledby","create-modal-title",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true","aria-labelledby","edit-modal-title",3,"click",4,"ngIf"],[1,"alert","alert-error"],["type","button",1,"alert-close",3,"click"],[1,"alert","alert-success"],[1,"stats-grid","stats-skeleton"],["class","stat-card skeleton",4,"ngFor","ngForOf"],[1,"stat-card","skeleton"],[1,"stat-icon","skeleton-icon"],[1,"stat-content"],[1,"skeleton-line","short"],[1,"skeleton-line","long"],[1,"stats-grid"],[1,"stat-card","stat-users"],[1,"stat-icon"],[1,"stat-value"],[1,"stat-details"],[1,"stat-card","stat-tasks"],[1,"stat-card","stat-events"],[1,"stat-card","stat-health"],[1,"stat-card","stat-finance"],[1,"stat-card","stat-wellness"],[1,"stat-card","stat-social"],["aria-label","Inscriptions r\xE9centes",1,"recent-section"],[1,"recent-list"],["class","recent-item",4,"ngFor","ngForOf"],[1,"recent-item"],[1,"recent-name"],[1,"recent-email"],[1,"badge",3,"ngClass"],[1,"recent-date"],[1,"loading","loading-users"],["aria-hidden","true",1,"spinner"],[1,"table-wrapper"],[1,"table-container"],[1,"users-table"],[4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["data-label","ID"],["data-label","Nom"],["data-label","Email"],["data-label","R\xF4le"],["data-label","Provider"],["data-label","Inscription"],["data-label","Actions",1,"actions-cell"],["type","button","title","Modifier",1,"btn-edit",3,"click"],["type","button","title","Supprimer",1,"btn-delete",3,"click"],[1,"pagination"],["type","button","aria-label","Page pr\xE9c\xE9dente",3,"click","disabled"],[1,"pagination-info"],["type","button","aria-label","Page suivante",3,"click","disabled"],[1,"empty-state"],[4,"ngIf"],["type","button","class","btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn-link",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","create-modal-title",1,"modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["id","create-modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","create-fullName"],["id","create-fullName","type","text","name","fullName","required","",3,"ngModelChange","ngModel"],["class","field-error",4,"ngIf"],["for","create-email"],["id","create-email","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","create-password"],["id","create-password","type","password","name","password",3,"ngModelChange","ngModel"],["for","create-role"],["id","create-role","name","role",3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary"],[1,"field-error"],["role","dialog","aria-modal","true","aria-labelledby","edit-modal-title",1,"modal",3,"click"],["id","edit-modal-title"],["for","edit-fullName"],["id","edit-fullName","type","text","name","fullName","required","",3,"ngModelChange","ngModel"],["for","edit-email"],["id","edit-email","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","edit-password"],["id","edit-password","type","password","name","password",3,"ngModelChange","ngModel"],["for","edit-role"],["id","edit-role","name","role",3,"ngModelChange","ngModel"]],template:function(d,a){d&1&&(n(0,"div",10)(1,"div",11)(2,"h1"),r(3),s(4,"translate"),t(),n(5,"button",12),x("click",function(){return a.router.navigate(["/home"])}),r(6),s(7,"translate"),t()(),b(8,oe,6,4,"div",13)(9,se,6,4,"div",14),n(10,"section",15)(11,"h2"),r(12),s(13,"translate"),t(),b(14,de,2,1,"div",16)(15,ce,107,75,"div",17),t(),b(16,pe,6,4,"section",18),n(17,"section",19)(18,"div",20)(19,"h2"),r(20,"Gestion des Utilisateurs"),t(),n(21,"button",21),x("click",function(){return a.openCreateModal()}),r(22,"+ Nouvel Utilisateur"),t()(),n(23,"div",22)(24,"input",23),y("ngModelChange",function(P){return M(a.searchTerm,P)||(a.searchTerm=P),P}),x("keyup.enter",function(){return a.searchUsers()}),t(),n(25,"button",24),x("click",function(){return a.searchUsers()}),r(26,"Rechercher"),t()(),b(27,ue,4,0,"div",25)(28,ve,29,23,"div",26)(29,fe,5,2,"div",27),t(),b(30,Pe,53,38,"div",28)(31,Ee,53,38,"div",29),t()),d&2&&(i(3),c(l(4,14,"admin.title")),i(3),O(" \u2190 ",l(7,16,"admin.backHome")," "),i(2),u("ngIf",a.error),i(),u("ngIf",a.successMessage),i(3),c(l(13,18,"admin.generalStats")),i(2),u("ngIf",a.loadingStats),i(),u("ngIf",!a.loadingStats&&a.stats),i(),u("ngIf",a.recentUsers.length),i(8),C("ngModel",a.searchTerm),i(3),u("ngIf",a.loadingUsers),i(),u("ngIf",!a.loadingUsers&&a.users.length>0),i(),u("ngIf",!a.loadingUsers&&a.users.length===0),i(),u("ngIf",a.showCreateModal),i(),u("ngIf",a.showUserModal))},dependencies:[j,N,W,D,z,te,Q,Z,$,G,X,Y,H,ee,K,J,ne],styles:[".admin-dashboard[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto;background:var(--notion-bg-secondary);min-height:100vh;color:var(--notion-text-primary)}.admin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid var(--notion-border)}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:var(--notion-text-primary);font-size:2rem}.btn-back[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--notion-gray);color:#fff;border:none;border-radius:var(--notion-radius);cursor:pointer;font-size:.9rem;transition:background 20ms ease-in 0s}.btn-back[_ngcontent-%COMP%]:hover{background:var(--notion-gray-bg);opacity:.9}.alert[_ngcontent-%COMP%]{padding:1rem 1.25rem;margin-bottom:1rem;border-radius:var(--notion-radius);display:flex;justify-content:space-between;align-items:center;gap:1rem;animation:_ngcontent-%COMP%_slideIn .2s ease-out}.alert-error[_ngcontent-%COMP%]{background:var(--notion-red-bg);color:var(--notion-red);border:1px solid var(--notion-red)}.alert-success[_ngcontent-%COMP%]{background:#00b4641f;color:var(--notion-green, #0f7b4a);border:1px solid var(--notion-green, #0f7b4a)}.alert-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;opacity:.8;line-height:1;padding:0 .25rem}.alert-close[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.stats-section[_ngcontent-%COMP%], .users-section[_ngcontent-%COMP%]{background:var(--notion-bg);padding:2rem;border-radius:var(--notion-radius-md);margin-bottom:2rem;box-shadow:var(--notion-shadow);border:1px solid var(--notion-border)}.stats-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .users-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:var(--notion-text-primary);font-size:1.5rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.25rem;margin-top:1.5rem}.stat-card[_ngcontent-%COMP%]{color:#fff;padding:1.25rem 1.5rem;border-radius:12px;display:flex;align-items:center;gap:1rem;box-shadow:0 4px 12px #0000001a;transition:transform .15s ease,box-shadow .15s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000001f}.stat-card.stat-users[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.stat-card.stat-tasks[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.stat-card.stat-events[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.stat-card.stat-health[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b,#38f9d7)}.stat-card.stat-finance[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140)}.stat-card.stat-wellness[_ngcontent-%COMP%]{background:linear-gradient(135deg,#30cfd0,#330867)}.stat-card.stat-social[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a18cd1,#fbc2eb)}.stats-skeleton[_ngcontent-%COMP%]   .stat-card.skeleton[_ngcontent-%COMP%]{background:var(--notion-bg-tertiary);color:transparent}.stats-skeleton[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:8px;background:var(--notion-border);animation:_ngcontent-%COMP%_pulse 1.2s ease-in-out infinite}.stats-skeleton[_ngcontent-%COMP%]   .skeleton-line[_ngcontent-%COMP%]{height:1rem;border-radius:4px;background:var(--notion-border);animation:_ngcontent-%COMP%_pulse 1.2s ease-in-out infinite}.stats-skeleton[_ngcontent-%COMP%]   .skeleton-line.short[_ngcontent-%COMP%]{width:60%}.stats-skeleton[_ngcontent-%COMP%]   .skeleton-line.long[_ngcontent-%COMP%]{width:90%;margin-top:.5rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.6}50%{opacity:1}}.stat-icon[_ngcontent-%COMP%]{font-size:3rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;opacity:.9}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:.5rem 0}.stat-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;font-size:.85rem;opacity:.9}.recent-section[_ngcontent-%COMP%]{background:var(--notion-bg);padding:2rem;border-radius:var(--notion-radius-md);margin-bottom:2rem;box-shadow:var(--notion-shadow);border:1px solid var(--notion-border)}.recent-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.25rem;color:var(--notion-text-primary)}.recent-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.recent-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.5fr auto auto;align-items:center;gap:1rem;padding:.75rem 1rem;background:var(--notion-bg-secondary);border-radius:var(--notion-radius);font-size:.9rem}.recent-name[_ngcontent-%COMP%]{font-weight:600;color:var(--notion-text-primary)}.recent-email[_ngcontent-%COMP%]{color:var(--notion-text-secondary)}.recent-date[_ngcontent-%COMP%]{color:var(--notion-text-tertiary);font-size:.85rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--notion-blue);color:#fff;border:none;border-radius:var(--notion-radius);cursor:pointer;font-size:1rem;font-weight:500;transition:background 20ms ease-in 0s}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--notion-blue-bg);opacity:.9}.search-bar[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1.5rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:1px solid var(--notion-border);border-radius:var(--notion-radius);font-size:1rem;background:var(--notion-bg);color:var(--notion-text-primary)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--notion-blue);box-shadow:0 0 0 1px var(--notion-blue)}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--notion-green);color:#fff;border:none;border-radius:var(--notion-radius);cursor:pointer;transition:background 20ms ease-in 0s}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--notion-green-bg);opacity:.9}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--notion-bg-tertiary);padding:1rem;text-align:left;font-weight:600;color:var(--notion-text-primary);border-bottom:2px solid var(--notion-border)}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid var(--notion-border);color:var(--notion-text-primary)}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.85rem;font-weight:500}.badge-admin[_ngcontent-%COMP%]{background:var(--notion-red);color:#fff}.badge-user[_ngcontent-%COMP%]{background:var(--notion-green);color:#fff}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--notion-yellow);color:var(--notion-text-primary);border:none;border-radius:var(--notion-radius);cursor:pointer;font-size:.9rem;transition:background 20ms ease-in 0s}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--notion-yellow-bg);opacity:.9}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--notion-red);color:#fff;border:none;border-radius:var(--notion-radius);cursor:pointer;font-size:.9rem;transition:background 20ms ease-in 0s}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--notion-red-bg);opacity:.9}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:1.5rem;padding:1rem}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--notion-blue);color:#fff;border:none;border-radius:var(--notion-radius);cursor:pointer;transition:background 20ms ease-in 0s}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--notion-blue-bg);opacity:.9}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:var(--notion-gray);opacity:.5;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--notion-text-secondary)}.loading-users[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem}.spinner[_ngcontent-%COMP%]{display:inline-block;width:1.5rem;height:1.5rem;border:2px solid var(--notion-border);border-top-color:var(--notion-blue);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-wrapper[_ngcontent-%COMP%]{margin-top:1rem}.pagination-info[_ngcontent-%COMP%]{font-size:.9rem;color:var(--notion-text-secondary)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;background:var(--notion-bg-secondary);border-radius:var(--notion-radius-md);border:1px dashed var(--notion-border)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--notion-text-secondary)}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-top:1rem}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--notion-blue);cursor:pointer;text-decoration:underline;font-size:inherit;padding:0}.btn-link[_ngcontent-%COMP%]:hover{opacity:.9}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:var(--notion-bg);border-radius:var(--notion-radius-md);width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:var(--notion-shadow-lg);border:1px solid var(--notion-border)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--notion-border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--notion-text-primary)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;cursor:pointer;color:var(--notion-text-tertiary);line-height:1;transition:color 20ms ease-in 0s}.close-btn[_ngcontent-%COMP%]:hover{color:var(--notion-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--notion-text-primary);font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--notion-border);border-radius:var(--notion-radius);font-size:1rem;box-sizing:border-box;background:var(--notion-bg);color:var(--notion-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--notion-blue);box-shadow:0 0 0 1px var(--notion-blue)}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--notion-gray);color:#fff;border:none;border-radius:var(--notion-radius);cursor:pointer;transition:background 20ms ease-in 0s}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--notion-gray-bg);opacity:.9}@media (max-width: 768px){.admin-dashboard[_ngcontent-%COMP%]{padding:1rem}.admin-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.recent-item[_ngcontent-%COMP%]{grid-template-columns:1fr auto;gap:.5rem}.recent-email[_ngcontent-%COMP%]{grid-column:1 / -1}.recent-date[_ngcontent-%COMP%]{grid-column:1}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.users-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;padding:1rem;background:var(--notion-bg-secondary);border-radius:var(--notion-radius);border:1px solid var(--notion-border)}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid var(--notion-border)}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:none}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:600;color:var(--notion-text-secondary);margin-right:.75rem}.users-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.users-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]:before{width:100%;margin-bottom:.25rem}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.75rem}.pagination-info[_ngcontent-%COMP%]{width:100%;text-align:center}.modal-content[_ngcontent-%COMP%]{width:95%;max-height:85vh}}"]})}}return o})();export{We as AdminComponent};
