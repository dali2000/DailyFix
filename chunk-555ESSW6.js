import{Aa as d,a as i,b as a,m as u,p as g}from"./chunk-TB66C4D3.js";var v=(()=>{class n{constructor(t){this.authService=t,this.events=[],this.suggestions=[{id:"1",title:"Randonn\xE9e en for\xEAt",description:"Profitez d'une belle journ\xE9e pour une randonn\xE9e en nature",category:"outdoor",estimatedCost:0,estimatedDuration:120},{id:"2",title:"Visite d'un mus\xE9e",description:"D\xE9couvrez l'art et l'histoire dans un mus\xE9e local",category:"cultural",estimatedCost:15,estimatedDuration:180},{id:"3",title:"Pique-nique au parc",description:"Un pique-nique simple et agr\xE9able avec des amis",category:"outdoor",estimatedCost:20,estimatedDuration:120},{id:"4",title:"S\xE9ance de cin\xE9ma",description:"Regardez un film au cin\xE9ma ou \xE0 la maison",category:"indoor",estimatedCost:12,estimatedDuration:150},{id:"5",title:"Cours de cuisine",description:"Apprenez \xE0 cuisiner un nouveau plat ensemble",category:"indoor",estimatedCost:30,estimatedDuration:120}],this.authService.currentUser$.subscribe(()=>{this.loadFromStorage()}),this.loadFromStorage()}getEvents(){return[...this.events]}addEvent(t){let e=a(i({},t),{id:this.generateId()});return this.events.push(e),this.saveToStorage(),e}updateEvent(t,e){let s=this.events.findIndex(r=>r.id===t);return s===-1?null:(this.events[s]=i(i({},this.events[s]),e),this.saveToStorage(),this.events[s])}deleteEvent(t){let e=this.events.findIndex(s=>s.id===t);return e===-1?!1:(this.events.splice(e,1),this.saveToStorage(),!0)}getUpcomingEvents(){let t=new Date;return this.events.filter(e=>new Date(e.date)>=t).sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime())}getEventsForDate(t){let e=t.toDateString();return this.events.filter(s=>new Date(s.date).toDateString()===e)}getBirthdays(){return this.events.filter(t=>t.type==="birthday")}getActivitySuggestions(){return[...this.suggestions]}getSuggestionsByCategory(t){return this.suggestions.filter(e=>e.category===t)}addCustomSuggestion(t){let e=a(i({},t),{id:this.generateId()});return this.suggestions.push(e),this.saveToStorage(),e}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveToStorage(){let t=this.authService.getUserStorageKey("socialEvents"),e=this.authService.getUserStorageKey("activitySuggestions");localStorage.setItem(t,JSON.stringify(this.events)),localStorage.setItem(e,JSON.stringify(this.suggestions))}loadFromStorage(){let t=this.authService.getUserStorageKey("socialEvents"),e=this.authService.getUserStorageKey("activitySuggestions"),s=localStorage.getItem(t),r=localStorage.getItem(e);s&&(this.events=JSON.parse(s).map(o=>a(i({},o),{date:new Date(o.date),reminder:o.reminder?new Date(o.reminder):void 0}))),r&&(this.suggestions=JSON.parse(r))}static{this.\u0275fac=function(e){return new(e||n)(g(d))}}static{this.\u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{v as a};
