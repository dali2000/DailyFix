import{O as l,a as s,b as r}from"./chunk-4MCKG6UH.js";var g=(()=>{class n{constructor(){this.meals=[],this.activities=[],this.sleepRecords=[],this.waterIntakes=[],this.meditationSessions=[],this.loadFromStorage()}getMeals(){return[...this.meals]}addMeal(t){let e=r(s({},t),{id:this.generateId()});return this.meals.push(e),this.saveToStorage(),e}deleteMeal(t){let e=this.meals.findIndex(i=>i.id===t);return e===-1?!1:(this.meals.splice(e,1),this.saveToStorage(),!0)}getMealsForDate(t){let e=t.toDateString();return this.meals.filter(i=>new Date(i.date).toDateString()===e)}getTodayCalories(){let t=new Date;return this.getMealsForDate(t).reduce((e,i)=>e+(i.calories||0),0)}getActivities(){return[...this.activities]}addActivity(t){let e=r(s({},t),{id:this.generateId()});return this.activities.push(e),this.saveToStorage(),e}deleteActivity(t){let e=this.activities.findIndex(i=>i.id===t);return e===-1?!1:(this.activities.splice(e,1),this.saveToStorage(),!0)}getActivitiesForDate(t){let e=t.toDateString();return this.activities.filter(i=>new Date(i.date).toDateString()===e)}getTodayActivityMinutes(){let t=new Date;return this.getActivitiesForDate(t).reduce((e,i)=>e+i.duration,0)}getSleepRecords(){return[...this.sleepRecords]}addSleepRecord(t){let e=(new Date(t.wakeTime).getTime()-new Date(t.sleepTime).getTime())/36e5,i=r(s({},t),{id:this.generateId(),hours:Math.round(e*10)/10});return this.sleepRecords.push(i),this.saveToStorage(),i}getLastSleepRecord(){return this.sleepRecords.length>0?this.sleepRecords.sort((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime())[0]:void 0}getWaterIntakes(){return[...this.waterIntakes]}addWaterIntake(t){let e=r(s({},t),{id:this.generateId()});return this.waterIntakes.push(e),this.saveToStorage(),e}getTodayWaterIntake(){let e=new Date().toDateString();return this.waterIntakes.filter(i=>new Date(i.date).toDateString()===e).reduce((i,o)=>i+o.amount,0)}getMeditationSessions(){return[...this.meditationSessions]}addMeditationSession(t){let e=r(s({},t),{id:this.generateId()});return this.meditationSessions.push(e),this.saveToStorage(),e}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveToStorage(){localStorage.setItem("dailyFix_meals",JSON.stringify(this.meals)),localStorage.setItem("dailyFix_activities",JSON.stringify(this.activities)),localStorage.setItem("dailyFix_sleep",JSON.stringify(this.sleepRecords)),localStorage.setItem("dailyFix_water",JSON.stringify(this.waterIntakes)),localStorage.setItem("dailyFix_meditation",JSON.stringify(this.meditationSessions))}loadFromStorage(){let t=localStorage.getItem("dailyFix_meals"),e=localStorage.getItem("dailyFix_activities"),i=localStorage.getItem("dailyFix_sleep"),o=localStorage.getItem("dailyFix_water"),d=localStorage.getItem("dailyFix_meditation");t&&(this.meals=JSON.parse(t).map(a=>r(s({},a),{date:new Date(a.date)}))),e&&(this.activities=JSON.parse(e).map(a=>r(s({},a),{date:new Date(a.date)}))),i&&(this.sleepRecords=JSON.parse(i).map(a=>r(s({},a),{date:new Date(a.date),sleepTime:new Date(a.sleepTime),wakeTime:new Date(a.wakeTime)}))),o&&(this.waterIntakes=JSON.parse(o).map(a=>r(s({},a),{date:new Date(a.date)}))),d&&(this.meditationSessions=JSON.parse(d).map(a=>r(s({},a),{date:new Date(a.date)})))}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{g as a};
