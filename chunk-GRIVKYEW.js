import{O as d,a,b as n}from"./chunk-X4VNRQJ7.js";var u=(()=>{class r{constructor(){this.tasks=[],this.events=[],this.loadFromStorage()}getTasks(){return[...this.tasks]}getTaskById(s){return this.tasks.find(e=>e.id===s)}addTask(s){let e=n(a({},s),{id:this.generateId(),status:s.status||"todo",priority:s.priority||"medium",createdAt:new Date,updatedAt:new Date});return this.tasks.push(e),this.saveToStorage(),e}updateTask(s,e){let t=this.tasks.findIndex(i=>i.id===s);return t===-1?null:(this.tasks[t]=n(a(a({},this.tasks[t]),e),{updatedAt:new Date}),this.saveToStorage(),this.tasks[t])}deleteTask(s){let e=this.tasks.findIndex(t=>t.id===s);return e===-1?!1:(this.tasks.splice(e,1),this.saveToStorage(),!0)}getTasksForDate(s){let e=s.toDateString();return this.tasks.filter(t=>t.dueDate&&new Date(t.dueDate).toDateString()===e)}getTasksByStatus(s){return this.tasks.filter(e=>e.status===s)}updateTaskStatus(s,e){return this.updateTask(s,{status:e})}getCompletedTasksCount(){return this.tasks.filter(s=>s.completed).length}getTotalTasksCount(){return this.tasks.length}getEvents(){return[...this.events]}addEvent(s){let e=n(a({},s),{id:this.generateId()});return this.events.push(e),this.saveToStorage(),e}updateEvent(s,e){let t=this.events.findIndex(i=>i.id===s);return t===-1?null:(this.events[t]=a(a({},this.events[t]),e),this.saveToStorage(),this.events[t])}deleteEvent(s){let e=this.events.findIndex(t=>t.id===s);return e===-1?!1:(this.events.splice(e,1),this.saveToStorage(),!0)}getEventsForDate(s){let e=s.toDateString();return this.events.filter(t=>new Date(t.startDate).toDateString()===e)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveToStorage(){localStorage.setItem("dailyFix_tasks",JSON.stringify(this.tasks)),localStorage.setItem("dailyFix_events",JSON.stringify(this.events))}loadFromStorage(){let s=localStorage.getItem("dailyFix_tasks"),e=localStorage.getItem("dailyFix_events");s&&(this.tasks=JSON.parse(s).map(t=>n(a({},t),{status:t.status||(t.completed?"done":"todo"),priority:t.priority||"medium",dueDate:t.dueDate?new Date(t.dueDate):void 0,reminder:t.reminder?new Date(t.reminder):void 0,createdAt:new Date(t.createdAt),updatedAt:t.updatedAt?new Date(t.updatedAt):new Date(t.createdAt)}))),e&&(this.events=JSON.parse(e).map(t=>n(a({},t),{startDate:new Date(t.startDate),endDate:t.endDate?new Date(t.endDate):void 0})))}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{u as a};
