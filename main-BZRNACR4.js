import{a as Et}from"./chunk-JAXIJPXF.js";import{a as At}from"./chunk-EPXKC3XO.js";import{a as Nt}from"./chunk-VY6LAYWV.js";import{a as Dt}from"./chunk-ZBJ5IVUW.js";import{a as Tt}from"./chunk-TMI4BXGE.js";import{$ as p,$a as L,A as _,Aa as bt,B as C,Ba as xt,C as M,D as q,Da as N,Ea as A,Fa as _t,Ga as Ct,H as ht,I as H,J as Z,Ja as I,K as a,Ka as wt,L as x,La as Mt,Ma as yt,Na as Pt,O as u,P as V,Pa as Ot,Q as s,Qa as D,Ra as $,S as O,Sa as J,T as ft,Ta as St,U as o,Ua as kt,V as r,Va as It,W as b,Wa as G,X as ut,Y as vt,Z as y,_ as v,_a as Q,ab as T,b as st,bb as z,c as ct,d as lt,f as K,fa as d,g as dt,ga as f,ha as it,i as pt,j as mt,n as gt,q as B,qa as k,sa as m,t as R,ta as g,u as nt,w as S,xa as U}from"./chunk-JODBZJDH.js";import{c as at}from"./chunk-POLL2CVR.js";var E=(n,l)=>{let t=nt(T),e=nt(D);return t.isAuthenticated()?!0:t.hasToken()?t.ensureAuthenticated$().pipe(gt(i=>{i||e.navigate(["/login"],{queryParams:{returnUrl:l.url}})}),dt(i=>i)):(e.navigate(["/login"],{queryParams:{returnUrl:l.url}}),K(!1))};var Lt=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-4RPOXFOP.js").then(n=>n.LoginComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-WCPIHKU3.js").then(n=>n.ForgotPasswordComponent)},{path:"reset-password",loadComponent:()=>import("./chunk-TENVC7QE.js").then(n=>n.ResetPasswordComponent)},{path:"home",loadComponent:()=>import("./chunk-2UHYOCJU.js").then(n=>n.HomeComponent),canActivate:[E]},{path:"tasks",loadComponent:()=>import("./chunk-H7ZBTATX.js").then(n=>n.TasksComponent),canActivate:[E]},{path:"calendar",loadComponent:()=>import("./chunk-QKQINDCL.js").then(n=>n.CalendarComponent),canActivate:[E]},{path:"health",loadComponent:()=>import("./chunk-KBHKD6DY.js").then(n=>n.HealthComponent),canActivate:[E]},{path:"finance",loadComponent:()=>import("./chunk-6DDKI3RK.js").then(n=>n.FinanceComponent),canActivate:[E]},{path:"home-org",loadComponent:()=>import("./chunk-PCXY2E7D.js").then(n=>n.HomeOrgComponent),canActivate:[E]},{path:"social",loadComponent:()=>import("./chunk-IHQTDDEL.js").then(n=>n.SocialComponent),canActivate:[E]},{path:"wellness",loadComponent:()=>import("./chunk-XMLEWQFC.js").then(n=>n.WellnessComponent),canActivate:[E]},{path:"settings",loadComponent:()=>import("./chunk-TIKIB26R.js").then(n=>n.SettingsComponent),canActivate:[E]},{path:"admin",loadComponent:()=>import("./chunk-5GSSEFE5.js").then(n=>n.AdminComponent),canActivate:[E]}];var Wt="dailyfix_token",zt=(n,l)=>{try{let t=typeof localStorage<"u"?localStorage.getItem(Wt):null;if(t){let i=n.clone({setHeaders:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return l(i)}let e=n.clone({setHeaders:{"Content-Type":"application/json"}});return l(e)}catch(t){return console.error("Interceptor error:",t),l(n)}};var Vt={providers:[kt(Lt,It(St)),{provide:bt,useClass:xt},wt(Mt([zt]))]};var et=(()=>{class n{constructor(t,e,i,c,h,w){this.taskService=t,this.financeService=e,this.healthService=i,this.homeService=c,this.authService=h,this.i18n=w,this.checkInterval=60*1e3,this.lastNotificationTime={},this.notificationCooldown=60*1e3,this.notificationsSubject=new lt([]),this.notifications$=this.notificationsSubject.asObservable(),this.notifications=[],this.initializeNotifications()}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe()}initializeNotifications(){this.requestPermission(),this.authSubscription=this.authService.currentUser$.subscribe(t=>{t?this.startNotifications():this.stopNotifications()})}requestPermission(){return at(this,null,function*(){"Notification"in window&&Notification.permission==="default"&&(yield Notification.requestPermission())})}startNotifications(){this.checkAndNotify(),this.intervalSubscription=pt(this.checkInterval).subscribe(()=>{this.checkAndNotify()})}stopNotifications(){this.intervalSubscription&&(this.intervalSubscription.unsubscribe(),this.intervalSubscription=void 0)}checkAndNotify(){!("Notification"in window)||Notification.permission!=="granted"||this.authService.isAuthenticated()&&(this.checkIncompleteTasks(),this.checkExpenses(),this.checkWaterIntake(),this.checkHouseholdTasks())}checkIncompleteTasks(){let e=this.taskService.getTasks().filter(i=>!i.completed&&i.status!=="done"&&(!i.dueDate||new Date(i.dueDate)>=new Date));if(e.length>0){let i="incomplete_tasks";if(this.canSendNotification(i)){let c=e.slice(0,3).map(F=>F.title).join(", "),h=e.length>3?this.i18n.instant("notifications.taskReminderMore").replace("{{count}}",String(e.length-3)):"",w=this.i18n.instant("notifications.taskReminderTitle"),P=this.i18n.instant("notifications.taskReminderMessage").replace("{{count}}",String(e.length)).replace("{{titles}}",c).replace("{{more}}",h);this.sendNotification(`\u{1F4CB} ${w}`,P,i,"task")}}}checkExpenses(){let t=new Date;if(this.financeService.getExpenses().filter(c=>new Date(c.date).toDateString()===t.toDateString()).length===0&&t.getHours()>=14&&t.getHours()<20){let c="add_expenses_"+t.toDateString();if(this.canSendNotification(c)){let h=this.i18n.instant("notifications.expenseReminderTitle"),w=this.i18n.instant("notifications.expenseReminderMessage");this.sendNotification(`\u{1F4B0} ${h}`,w,c,"expense")}}}checkWaterIntake(){let t=this.healthService.getTodayWaterIntake(),e=2e3,c=new Date().getHours();if(t<e*.5&&c>=8&&c<20&&c%2===0){let w="drink_water_"+c;if(this.canSendNotification(w)){let P=this.i18n.instant("notifications.waterReminderTitle"),F=this.i18n.instant("notifications.waterReminderMessage").replace("{{amount}}",String(t));this.sendNotification(`\u{1F4A7} ${P}`,F,w,"water")}}}checkHouseholdTasks(){let e=this.homeService.getHouseholdTasks().filter(i=>{if(i.completed)return!1;if(i.nextDueDate){let c=new Date(i.nextDueDate),h=new Date;return h.setHours(0,0,0,0),c.setHours(0,0,0,0),c<=h}return!0});if(e.length>0){let i="household_tasks";if(this.canSendNotification(i)){let c=e.slice(0,2).map(F=>F.name).join(", "),h=e.length>2?" "+this.i18n.instant("notifications.householdReminderMore").replace("{{count}}",String(e.length-2)):"",w=this.i18n.instant("notifications.householdReminderTitle"),P=this.i18n.instant("notifications.householdReminderMessage").replace("{{count}}",String(e.length)).replace("{{names}}",c).replace("{{more}}",h);this.sendNotification(`\u{1F3E0} ${w}`,P,i,"household")}}}canSendNotification(t){let e=Date.now(),i=this.lastNotificationTime[t]||0;return e-i>=this.notificationCooldown?(this.lastNotificationTime[t]=e,!0):!1}sendNotification(t,e,i,c="task"){let h={id:`${i}_${Date.now()}`,title:t,message:e,type:c,timestamp:new Date,read:!1};if(this.notifications.unshift(h),this.notifications.length>50&&(this.notifications=this.notifications.slice(0,50)),this.notificationsSubject.next([...this.notifications]),"Notification"in window&&Notification.permission==="granted"){let w=new Notification(t,{body:e,icon:"/favicon.ico",tag:i,requireInteraction:!1,silent:!1});setTimeout(()=>{w.close()},5e3),w.onclick=()=>{window.focus(),w.close()}}}testNotification(){let t=this.i18n.instant("notifications.testTitle"),e=this.i18n.instant("notifications.testMessage");this.sendNotification(t,e,"test","task")}markAsRead(t){let e=this.notifications.find(i=>i.id===t);e&&(e.read=!0,this.notificationsSubject.next([...this.notifications]))}markAllAsRead(){this.notifications.forEach(t=>t.read=!0),this.notificationsSubject.next([...this.notifications])}removeNotification(t){this.notifications=this.notifications.filter(e=>e.id!==t),this.notificationsSubject.next([...this.notifications])}getUnreadCount(){return this.notifications.filter(t=>!t.read).length}getNotifications(){return[...this.notifications]}static{this.\u0275fac=function(e){return new(e||n)(R(Tt),R(Nt),R(Et),R(At),R(T),R(L))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Kt(n,l){if(n&1&&(o(0,"span",6),d(1),r()),n&2){let t=p();a(),f(t.unreadCount>99?"99+":t.unreadCount)}}function qt(n,l){if(n&1){let t=y();o(0,"button",13),m(1,"translate"),v("click",function(){_(t);let i=p(2);return C(i.clearAll())}),M(),o(2,"svg",14),b(3,"line",15)(4,"line",16),r()()}n&2&&s("title",g(1,1,"notifications.clearAll"))}function Yt(n,l){if(n&1){let t=y();o(0,"div",17),v("click",function(){let i=_(t).$implicit,c=p(2);return C(c.markAsRead(i))}),o(1,"div",18),d(2),r(),o(3,"div",19)(4,"div",20),d(5),r(),o(6,"div",21),d(7),r(),o(8,"div",22),d(9),r()(),o(10,"button",23),m(11,"translate"),v("click",function(i){let c=_(t).$implicit,h=p(2);return C(h.removeNotification(c,i))}),M(),o(12,"svg",24),b(13,"line",15)(14,"line",16),r()()()}if(n&2){let t=l.$implicit,e=p(2);O("unread",!t.read),a(2),f(e.getNotificationIcon(t.type)),a(3),f(t.title),a(2),f(t.message),a(2),f(e.formatTime(t.timestamp)),a(),V("aria-label",g(11,7,"notifications.removeLabel"))}}function Zt(n,l){n&1&&(o(0,"div",25)(1,"p"),d(2),m(3,"translate"),r()()),n&2&&(a(2),f(g(3,1,"notifications.noNotifications")))}function Jt(n,l){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"h3"),d(3),m(4,"translate"),r(),u(5,qt,5,3,"button",9),r(),o(6,"div",10),u(7,Yt,15,9,"div",11)(8,Zt,4,3,"div",12),r()()),n&2){let t=p();a(3),f(g(4,4,"notifications.title")),a(2),s("ngIf",t.notifications.length>0),a(2),s("ngForOf",t.notifications),a(),s("ngIf",t.notifications.length===0)}}var Ft=(()=>{class n{constructor(t,e,i){this.notificationService=t,this.i18n=e,this.cdr=i,this.showDropdown=!1,this.notifications=[],this.unreadCount=0}ngOnInit(){this.notificationsSubscription=this.notificationService.notifications$.subscribe(t=>{this.notifications=t,this.unreadCount=this.notificationService.getUnreadCount()}),this.langSubscription=this.i18n.onLangChange.subscribe(()=>this.cdr.markForCheck())}ngOnDestroy(){this.notificationsSubscription?.unsubscribe(),this.langSubscription?.unsubscribe()}onDocumentClick(t){t.target.closest(".notifications-container")||(this.showDropdown=!1)}toggleDropdown(){this.showDropdown=!this.showDropdown,this.showDropdown&&this.notificationService.markAllAsRead()}markAsRead(t){t.read||this.notificationService.markAsRead(t.id)}removeNotification(t,e){e.stopPropagation(),this.notificationService.removeNotification(t.id)}getNotificationIcon(t){switch(t){case"task":return"\u{1F4CB}";case"expense":return"\u{1F4B0}";case"water":return"\u{1F4A7}";case"household":return"\u{1F3E0}";default:return"\u{1F514}"}}formatTime(t){let i=new Date().getTime()-new Date(t).getTime(),c=Math.floor(i/6e4),h=Math.floor(i/36e5),w=Math.floor(i/864e5);if(c<1)return this.i18n.instant("notifications.justNow");if(c<60)return this.i18n.instant("notifications.minutesAgo").replace("{{count}}",String(c));if(h<24)return this.i18n.instant("notifications.hoursAgo").replace("{{count}}",String(h));if(w<7)return this.i18n.instant("notifications.daysAgo").replace("{{count}}",String(w));let P=this.i18n.currentLang==="fr"?"fr-FR":this.i18n.currentLang==="ar"?"ar":"en-US";return new Date(t).toLocaleDateString(P)}clearAll(){this.notifications.forEach(t=>{this.notificationService.removeNotification(t.id)})}static{this.\u0275fac=function(e){return new(e||n)(x(et),x(L),x(U))}}static{this.\u0275cmp=S({type:n,selectors:[["app-notifications"]],hostBindings:function(e,i){e&1&&v("click",function(h){return i.onDocumentClick(h)},!1,Z)},standalone:!0,features:[k],decls:10,vars:12,consts:[[1,"notifications-container"],[1,"notification-btn",3,"click","title"],["viewBox","0 0 24 24","aria-hidden","true"],["d","M12 22a2.5 2.5 0 0 0 2.45-2h-4.9A2.5 2.5 0 0 0 12 22Zm6-6V11a6 6 0 1 0-12 0v5l-2 2v1h16v-1l-2-2Z","fill","currentColor"],["class","notification-badge",4,"ngIf"],["class","notifications-dropdown",4,"ngIf"],[1,"notification-badge"],[1,"notifications-dropdown"],[1,"dropdown-header"],["class","clear-btn",3,"title","click",4,"ngIf"],[1,"notifications-list"],["class","notification-item",3,"unread","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"clear-btn",3,"click","title"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],[1,"remove-btn",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"empty-state"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),m(2,"translate"),m(3,"translate"),m(4,"translate"),m(5,"translate"),v("click",function(){return i.toggleDropdown()}),M(),o(6,"svg",2),b(7,"path",3),r(),u(8,Kt,2,1,"span",4),r(),u(9,Jt,9,6,"div",5),r()),e&2&&(a(),s("title",i.unreadCount>0?i.unreadCount+" "+g(2,4,"notifications.unread"):g(3,6,"notifications.title")),V("aria-label",g(4,8,"notifications.title")+(i.unreadCount>0?" ("+i.unreadCount+" "+g(5,10,"notifications.unread")+")":"")),a(7),s("ngIf",i.unreadCount>0),a(),s("ngIf",i.showDropdown))},dependencies:[I,N,A,z],styles:[".notifications-container[_ngcontent-%COMP%]{position:relative}.notification-btn[_ngcontent-%COMP%]{position:relative;background:transparent;border:none;cursor:pointer;padding:8px;border-radius:var(--notion-radius);color:var(--notion-text-primary);transition:background 20ms ease-in 0s;display:flex;align-items:center;justify-content:center}.notification-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.notification-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:var(--notion-red);color:#fff;border-radius:10px;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;padding:0 5px;border:2px solid var(--notion-bg)}.notifications-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);right:0;width:380px;max-width:calc(100vw - 32px);max-height:500px;background:var(--notion-bg);border:1px solid var(--notion-border);border-radius:var(--notion-radius);box-shadow:var(--notion-shadow-lg);z-index:1000;display:flex;flex-direction:column;overflow:hidden}.dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid var(--notion-border)}.dropdown-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--notion-text-primary)}.clear-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;border-radius:var(--notion-radius-sm);color:var(--notion-text-secondary);transition:all 20ms ease-in 0s;display:flex;align-items:center;justify-content:center}.clear-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.notifications-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px 16px;border-bottom:1px solid var(--notion-border);cursor:pointer;transition:background 20ms ease-in 0s;position:relative}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.notification-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.notification-item.unread[_ngcontent-%COMP%]{background:var(--notion-blue-bg)}.notification-item.unread[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.notification-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-text-primary);margin-bottom:4px;line-height:1.4}.notification-message[_ngcontent-%COMP%]{font-size:13px;color:var(--notion-text-secondary);line-height:1.4;margin-bottom:6px;word-wrap:break-word}.notification-time[_ngcontent-%COMP%]{font-size:11px;color:var(--notion-text-tertiary)}.remove-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;border-radius:var(--notion-radius-sm);color:var(--notion-text-tertiary);opacity:0;transition:all 20ms ease-in 0s;flex-shrink:0;display:flex;align-items:center;justify-content:center}.notification-item[_ngcontent-%COMP%]:hover   .remove-btn[_ngcontent-%COMP%]{opacity:1}.remove-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.empty-state[_ngcontent-%COMP%]{padding:48px 24px;text-align:center;color:var(--notion-text-tertiary);font-size:14px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media (max-width: 768px){.notification-btn[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px;padding:0}.notification-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.notification-badge[_ngcontent-%COMP%]{min-width:14px;height:14px;font-size:10px;top:2px;right:2px;padding:0 3px;border-width:1.5px}.notifications-dropdown[_ngcontent-%COMP%]{position:fixed;top:45px;left:50%;transform:translate(-50%);right:auto;width:min(360px,calc(100vw - 24px));max-width:calc(100vw - 24px);max-height:calc(100vh - 56px);z-index:1001}}@media (max-width: 480px){.notification-btn[_ngcontent-%COMP%]{width:24px;height:24px;min-width:24px;padding:0}.notification-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.notification-badge[_ngcontent-%COMP%]{min-width:12px;height:12px;font-size:9px;top:1px;right:1px;padding:0 2px;border-width:1px}.notifications-dropdown[_ngcontent-%COMP%]{position:fixed;top:45px;left:50%;transform:translate(-50%);right:auto;width:min(360px,calc(100vw - 24px));max-width:calc(100vw - 24px);max-height:calc(100vh - 56px);z-index:1001}.dropdown-header[_ngcontent-%COMP%]{padding:12px}.dropdown-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.notification-item[_ngcontent-%COMP%]{padding:10px 12px;gap:8px}.notification-icon[_ngcontent-%COMP%]{font-size:20px;width:28px;height:28px}.notification-title[_ngcontent-%COMP%]{font-size:13px}.notification-message[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var Rt=(()=>{class n{constructor(){this.apiKey="YOUR_API_KEY",this.apiUrl="https://api.openweathermap.org/data/2.5/weather",this.useMock=!0}getCurrentLocation(){return new Promise((t,e)=>{if(!navigator.geolocation){e(new Error("La g\xE9olocalisation n'est pas support\xE9e par votre navigateur"));return}navigator.geolocation.getCurrentPosition(i=>{t({latitude:i.coords.latitude,longitude:i.coords.longitude})},i=>{i.code!==1&&console.warn("G\xE9olocalisation:",i.message),e(i)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}getWeatherByLocation(t,e){return K({city:this.getCityNameFromCoordinates(t,e),temperature:Math.floor(Math.random()*15)+15,description:this.getRandomDescription(),icon:this.getRandomIcon(),humidity:Math.floor(Math.random()*40)+40,windSpeed:Math.floor(Math.random()*20)+5,feelsLike:Math.floor(Math.random()*15)+15,latitude:t,longitude:e})}getWeather(t="Paris"){return K({city:t,temperature:Math.floor(Math.random()*15)+15,description:this.getRandomDescription(),icon:this.getRandomIcon(),humidity:Math.floor(Math.random()*40)+40,windSpeed:Math.floor(Math.random()*20)+5,feelsLike:Math.floor(Math.random()*15)+15})}getWeatherAuto(){return new st(t=>{this.getCurrentLocation().then(e=>{this.getWeatherByLocation(e.latitude,e.longitude).subscribe({next:i=>t.next(i),error:i=>{console.error("Erreur lors de la r\xE9cup\xE9ration de la m\xE9t\xE9o:",i),this.getWeather("Paris").subscribe({next:c=>t.next(c),error:c=>t.error(c),complete:()=>t.complete()})},complete:()=>t.complete()})}).catch(e=>{e?.code!==1&&console.warn("G\xE9olocalisation:",e?.message||e),this.getWeather("Paris").subscribe({next:i=>t.next(i),error:i=>t.error(i),complete:()=>t.complete()})})})}getCityNameFromCoordinates(t,e){return t>=48.8&&t<=48.9&&e>=2.2&&e<=2.4?"Paris":t>=45.7&&t<=45.8&&e>=4.8&&e<=4.9?"Lyon":t>=43.2&&t<=43.3&&e>=5.3&&e<=5.4?"Marseille":t>=50.6&&t<=50.7&&e>=3&&e<=3.1?"Lille":t>=44.8&&t<=44.9&&e>=-.6&&e<=-.5?"Bordeaux":t>=43.6&&t<=43.7&&e>=1.4&&e<=1.5?"Toulouse":t>=47.2&&t<=47.3&&e>=-1.5&&e<=-1.4?"Nantes":t>=48.1&&t<=48.2&&e>=-1.6&&e<=-1.5?"Rennes":t>=45.1&&t<=45.2&&e>=5.7&&e<=5.8?"Grenoble":t>=49.1&&t<=49.2&&e>=6.1&&e<=6.2?"Strasbourg":t>=36.7&&t<=37&&e>=10&&e<=10.3?"Tunis":t>=52.3&&t<=52.6&&e>=4.7&&e<=5?"Amsterdam":t>=50&&t<=50.2&&e>=4.3&&e<=4.5?"Bruxelles":t>=48.1&&t<=48.3&&e>=11.4&&e<=11.7?"Munich":t>=52.4&&t<=52.6&&e>=13.2&&e<=13.6?"Berlin":t>=41.8&&t<=41.9&&e>=12.4&&e<=12.6?"Rome":t>=40.4&&t<=40.5&&e>=-3.7&&e<=-3.6?"Madrid":t>=51.4&&t<=51.6&&e>=-.2&&e<=0?"Londres":"Ma localisation"}getRandomDescription(){let t=["Ensoleill\xE9","Nuageux","Partiellement nuageux","Pluvieux","Orageux"];return t[Math.floor(Math.random()*t.length)]}getRandomIcon(){let t=["\u2600\uFE0F","\u2601\uFE0F","\u{1F324}\uFE0F","\u{1F327}\uFE0F","\u26C8\uFE0F"];return t[Math.floor(Math.random()*t.length)]}getWeatherIcon(t){return{Clear:"\u2600\uFE0F",Clouds:"\u2601\uFE0F",Rain:"\u{1F327}\uFE0F",Drizzle:"\u{1F326}\uFE0F",Thunderstorm:"\u26C8\uFE0F",Snow:"\u2744\uFE0F",Mist:"\u{1F32B}\uFE0F",Fog:"\u{1F32B}\uFE0F"}[t]||"\u{1F324}\uFE0F"}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var W=(()=>{class n{constructor(){this.toggleSidebarSubject=new ct,this.toggleSidebar$=this.toggleSidebarSubject.asObservable()}toggle(){this.toggleSidebarSubject.next()}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function te(n,l){if(n&1){let t=y();o(0,"button",27),v("click",function(){_(t);let i=p();return C(i.toggleSidebar())}),M(),o(1,"svg",11),b(2,"line",28)(3,"line",29)(4,"line",30),r()()}}function ee(n,l){if(n&1&&(o(0,"div",31)(1,"span",32),d(2),r(),o(3,"div",33)(4,"span",34),d(5),r(),o(6,"span",35),d(7),r()(),o(8,"span",36),d(9),r()()),n&2){let t=p();a(2),f(t.weather.icon),a(3),it("",t.weather.temperature,"\xB0C"),a(2),f(t.weather.city),a(2),it("",t.weather.temperature,"\xB0C")}}function ne(n,l){n&1&&(o(0,"div",37)(1,"span"),d(2),m(3,"translate"),r()()),n&2&&(a(2),f(g(3,1,"common.loading")))}function ie(n,l){n&1&&(M(),o(0,"svg",11),b(1,"path",39),r())}function oe(n,l){n&1&&(M(),o(0,"svg",11),b(1,"path",40),r())}function re(n,l){if(n&1){let t=y();o(0,"button",38),m(1,"translate"),m(2,"translate"),m(3,"translate"),m(4,"translate"),v("click",function(){_(t);let i=p();return C(i.toggleFullscreen())}),u(5,ie,2,0,"svg",17)(6,oe,2,0,"svg",17),r()}if(n&2){let t=p();s("title",t.isFullscreen?g(1,4,"navbar.exitFullscreen"):g(2,6,"navbar.fullscreen")),V("aria-label",t.isFullscreen?g(3,8,"navbar.exitFullscreen"):g(4,10,"navbar.fullscreen")),a(5),s("ngIf",!t.isFullscreen),a(),s("ngIf",t.isFullscreen)}}function ae(n,l){if(n&1){let t=y();o(0,"button",43),v("click",function(){let i=_(t).$implicit,c=p(2);return C(c.setLanguage(i.code))}),o(1,"span",44),d(2),r(),o(3,"span",45),d(4),m(5,"uppercase"),r()()}if(n&2){let t=l.$implicit,e=p(2);O("active",e.currentLang===t.code),a(2),f(t.label),a(2),f(g(5,4,t.code))}}function se(n,l){if(n&1&&(o(0,"div",41),u(1,ae,6,6,"button",42),r()),n&2){let t=p();a(),s("ngForOf",t.langOptions)}}function ce(n,l){n&1&&(M(),o(0,"svg",11),b(1,"circle",46)(2,"line",47)(3,"line",48)(4,"line",49)(5,"line",50)(6,"line",51)(7,"line",52)(8,"line",53)(9,"line",54),r())}function le(n,l){n&1&&(M(),o(0,"svg",11),b(1,"path",55),r())}function de(n,l){if(n&1&&b(0,"img",56),n&2){let t=p();s("src",t.currentUser==null?null:t.currentUser.profilePhoto,ht)}}function pe(n,l){if(n&1&&(o(0,"span"),d(1),r()),n&2){let t=p();a(),f(t.userInitials)}}function me(n,l){if(n&1){let t=y();o(0,"div",67),v("click",function(){_(t);let i=p(2);return C(i.closeProfileDropdown())}),M(),o(1,"svg",63),b(2,"rect",68)(3,"line",69)(4,"line",70),r(),q(),o(5,"span"),d(6),m(7,"translate"),r()()}n&2&&(a(6),f(g(7,1,"navbar.adminDashboard")))}function ge(n,l){if(n&1){let t=y();o(0,"div",57),u(1,me,8,3,"div",58),o(2,"div",59),v("click",function(){_(t);let i=p();return C(i.closeProfileDropdown())}),M(),o(3,"svg",60),b(4,"path",61),r(),q(),o(5,"span"),d(6),m(7,"translate"),r()(),o(8,"div",62),v("click",function(){_(t);let i=p();return C(i.logout())}),M(),o(9,"svg",63),b(10,"path",64)(11,"polyline",65)(12,"line",66),r(),q(),o(13,"span"),d(14),m(15,"translate"),r()()()}if(n&2){let t=p();a(),s("ngIf",t.isAdmin),a(5),f(g(7,3,"navbar.settings")),a(8),f(g(15,5,"nav.logout"))}}var Bt=(()=>{class n{constructor(t,e,i,c,h,w,P){this.weatherService=t,this.sidebarService=e,this.router=i,this.authService=c,this.themeService=h,this.i18n=w,this.cdr=P,this.showMenu=!1,this.showProfileDropdown=!1,this.weather=null,this.weatherLoading=!1,this.isMobile=!1,this.hideFullscreen=!1,this.currentUser=null,this.currentTheme="light",this.isFullscreen=!1,this.showLangDropdown=!1,this.currentLang="fr",this.langOptions=[{code:"fr",label:"Fran\xE7ais"},{code:"en",label:"English"},{code:"ar",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"}],this.fullscreenChangeHandler=()=>this.updateFullscreenState()}onResize(t){this.checkMobile()}onDocumentClick(t){let e=t.target;e.closest(".profile-container")||(this.showProfileDropdown=!1),e.closest(".lang-container")||(this.showLangDropdown=!1)}checkMobile(){let t=window.innerWidth;this.isMobile=t<=768,this.hideFullscreen=t>=375&&t<=412}ngOnInit(){this.checkMobile(),this.updateFullscreenState(),document.addEventListener("fullscreenchange",this.fullscreenChangeHandler),document.addEventListener("webkitfullscreenchange",this.fullscreenChangeHandler),this.loadWeather(),this.currentUser=this.authService.getCurrentUser(),this.userSubscription=this.authService.currentUser$.subscribe(t=>{this.currentUser=t}),this.currentTheme=this.themeService.getCurrentTheme(),this.themeSubscription=this.themeService.theme$.subscribe(t=>{this.currentTheme=t}),this.currentLang=this.i18n.currentLang,this.langSubscription=this.i18n.onLangChange.subscribe(t=>{this.currentLang=t,this.cdr.detectChanges()}),this.cdr.detectChanges()}get isRtl(){return this.currentLang==="ar"}ngOnDestroy(){document.removeEventListener("fullscreenchange",this.fullscreenChangeHandler),document.removeEventListener("webkitfullscreenchange",this.fullscreenChangeHandler),this.userSubscription&&this.userSubscription.unsubscribe(),this.themeSubscription&&this.themeSubscription.unsubscribe(),this.langSubscription&&this.langSubscription.unsubscribe()}toggleLangDropdown(){this.showLangDropdown=!this.showLangDropdown}setLanguage(t){this.i18n.use(t).subscribe(),this.showLangDropdown=!1,this.authService.isAuthenticated()&&this.authService.updateProfile({locale:t}).subscribe({error:()=>{}})}updateFullscreenState(){let t=document;this.isFullscreen=!!(t.fullscreenElement??t.webkitFullscreenElement)}toggleFullscreen(){let t=document.documentElement;this.isFullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}get userInitials(){if(!this.currentUser||!this.currentUser.fullName)return"AM";let t=this.currentUser.fullName.split(" ").filter(e=>e.length>0);return t.length===0?"AM":t.length===1?t[0].substring(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()}get userName(){return this.currentUser?this.currentUser.fullName:"Alex Martin"}get isAdmin(){return this.currentUser?.role==="admin"}toggleMenu(){this.showMenu=!this.showMenu}toggleProfileDropdown(){this.showProfileDropdown=!this.showProfileDropdown}closeProfileDropdown(){this.showProfileDropdown=!1}toggleSidebar(){this.sidebarService.toggle()}logout(){this.showProfileDropdown=!1,this.authService.logout()}toggleTheme(){this.themeService.toggleTheme();let t=this.themeService.getCurrentTheme();this.authService.getCurrentUser()&&this.authService.updateProfile({theme:t}).subscribe({error:e=>console.error("Erreur sauvegarde th\xE8me",e)})}loadWeather(){this.weatherLoading=!0,this.weatherService.getWeatherAuto().subscribe({next:t=>{this.weather=t,this.weatherLoading=!1},error:t=>{console.error("Erreur lors du chargement de la m\xE9t\xE9o:",t),this.weatherLoading=!1}})}static{this.\u0275fac=function(e){return new(e||n)(x(Rt),x(W),x(D),x(T),x(Q),x(L),x(U))}}static{this.\u0275cmp=S({type:n,selectors:[["app-navbar"]],hostVars:2,hostBindings:function(e,i){e&1&&v("resize",function(h){return i.onResize(h)},!1,H)("click",function(h){return i.onDocumentClick(h)},!1,Z),e&2&&O("navbar-rtl",i.isRtl)},standalone:!0,features:[k],decls:37,vars:31,consts:[[1,"navbar"],[1,"navbar-left"],["class","menu-btn","aria-label","Menu",3,"click",4,"ngIf"],["routerLink","/home","aria-label","DailyFix home",1,"brand"],[1,"badge"],["class","weather-widget",4,"ngIf"],["class","weather-widget weather-loading",4,"ngIf"],[1,"navbar-right"],["class","icon-btn",3,"title","click",4,"ngIf"],[1,"lang-container"],["type","button",1,"icon-btn",3,"click","title"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","2","y1","12","x2","22","y2","12"],["d","M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],["class","lang-dropdown",4,"ngIf"],["aria-label","Toggle theme",1,"icon-btn","theme-toggle-btn",3,"click","title"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"profile-container"],["role","button","tabindex","0",1,"profile",3,"click"],[1,"avatar"],["alt","","class","avatar-img",3,"src",4,"ngIf"],[4,"ngIf"],[1,"name"],["width","12","height","12","viewBox","0 0 12 12","fill","none","stroke","currentColor","stroke-width","2",1,"dropdown-arrow"],["d","M3 4.5L6 7.5L9 4.5"],["class","profile-dropdown",4,"ngIf"],["aria-label","Menu",1,"menu-btn",3,"click"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","18","x2","21","y2","18"],[1,"weather-widget"],[1,"weather-icon"],[1,"weather-info"],[1,"weather-temp"],[1,"weather-city"],[1,"weather-temp-mobile"],[1,"weather-widget","weather-loading"],[1,"icon-btn",3,"click","title"],["d","M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"],["d","M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"],[1,"lang-dropdown"],["type","button","class","dropdown-item lang-item",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item","lang-item",3,"click"],[1,"lang-label"],[1,"lang-code"],["cx","12","cy","12","r","5"],["x1","12","y1","1","x2","12","y2","3"],["x1","12","y1","21","x2","12","y2","23"],["x1","4.22","y1","4.22","x2","5.64","y2","5.64"],["x1","18.36","y1","18.36","x2","19.78","y2","19.78"],["x1","1","y1","12","x2","3","y2","12"],["x1","21","y1","12","x2","23","y2","12"],["x1","4.22","y1","19.78","x2","5.64","y2","18.36"],["x1","18.36","y1","5.64","x2","19.78","y2","4.22"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],["alt","",1,"avatar-img",3,"src"],[1,"profile-dropdown"],["class","dropdown-item","routerLink","/admin",3,"click",4,"ngIf"],["routerLink","/settings",1,"dropdown-item",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true"],["d","M19.14,12.94a7.43,7.43,0,0,0,.05-.94,7.43,7.43,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.64L19.8,5.27a.5.5,0,0,0-.6-.22l-2.49,1a7.08,7.08,0,0,0-1.63-.94l-.38-2.65A.5.5,0,0,0,14.21,2H9.79a.5.5,0,0,0-.49.42L8.92,5.07a7.08,7.08,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22L2.63,8.77a.5.5,0,0,0,.12.64L4.86,11.06a7.43,7.43,0,0,0-.05.94,7.43,7.43,0,0,0,.05.94L2.75,14.59a.5.5,0,0,0-.12.64l1.57,2.86a.5.5,0,0,0,.6.22l2.49-1a7.08,7.08,0,0,0,1.63.94l.38,2.65a.5.5,0,0,0,.49.42h4.42a.5.5,0,0,0,.49-.42l.38-2.65a7.08,7.08,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l1.57-2.86a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"],[1,"dropdown-item",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],["routerLink","/admin",1,"dropdown-item",3,"click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","9","y1","3","x2","9","y2","21"],["x1","3","y1","9","x2","21","y2","9"]],template:function(e,i){e&1&&(o(0,"nav",0)(1,"div",1),u(2,te,5,0,"button",2),o(3,"a",3),d(4,"DailyFix"),r(),o(5,"span",4),d(6),m(7,"translate"),r(),u(8,ee,10,4,"div",5)(9,ne,4,3,"div",6),r(),o(10,"div",7),b(11,"app-notifications"),u(12,re,7,12,"button",8),o(13,"div",9)(14,"button",10),m(15,"translate"),m(16,"translate"),v("click",function(){return i.toggleLangDropdown()}),M(),o(17,"svg",11),b(18,"circle",12)(19,"line",13)(20,"path",14),r()(),u(21,se,2,1,"div",15),r(),q(),o(22,"button",16),m(23,"translate"),v("click",function(){return i.toggleTheme()}),u(24,ce,10,0,"svg",17)(25,le,2,0,"svg",17),r(),o(26,"div",18)(27,"div",19),m(28,"translate"),v("click",function(){return i.toggleProfileDropdown()}),o(29,"div",20),u(30,de,1,1,"img",21)(31,pe,2,1,"span",22),r(),o(32,"span",23),d(33),r(),M(),o(34,"svg",24),b(35,"path",25),r()(),u(36,ge,16,7,"div",26),r()()()),e&2&&(O("navbar-rtl",i.isRtl),V("dir",i.isRtl?"rtl":null),a(2),s("ngIf",i.isMobile),a(4),f(g(7,21,"navbar.freeVersion")),a(2),s("ngIf",i.weather&&!i.weatherLoading),a(),s("ngIf",i.weatherLoading),a(3),s("ngIf",!i.hideFullscreen),a(2),s("title",g(15,23,"navbar.changeLanguage")),V("aria-label",g(16,25,"navbar.changeLanguage")),a(7),s("ngIf",i.showLangDropdown),a(),s("title",g(23,27,i.currentTheme==="dark"?"navbar.themeLight":"navbar.themeDark")),a(2),s("ngIf",i.currentTheme==="dark"),a(),s("ngIf",i.currentTheme!=="dark"),a(2),V("aria-label",g(28,29,"navbar.userAccount")),a(2),O("has-photo",i.currentUser==null?null:i.currentUser.profilePhoto),a(),s("ngIf",i.currentUser==null?null:i.currentUser.profilePhoto),a(),s("ngIf",!(i.currentUser!=null&&i.currentUser.profilePhoto)),a(2),f(i.userName),a(3),s("ngIf",i.showProfileDropdown))},dependencies:[I,N,A,Ct,G,$,Ft,z],styles:[".navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;height:45px;display:flex;align-items:center;justify-content:space-between;padding:0 14px;background:var(--notion-bg);border-bottom:1px solid var(--notion-border);font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;box-shadow:0 1px 2px #0000000d}.navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;transition:margin-left .1s ease-in 0s}.menu-btn[_ngcontent-%COMP%]{display:none;background:transparent;border:none;color:var(--notion-text-primary);cursor:pointer;padding:6px;border-radius:var(--notion-radius);transition:background 20ms ease-in 0s;flex-shrink:0}.menu-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}@media (max-width: 768px){.menu-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.navbar-left[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{padding:0 8px}.navbar-left[_ngcontent-%COMP%]{margin-left:48px;gap:6px;min-width:0;overflow:hidden}.brand[_ngcontent-%COMP%]{font-size:13px;padding:4px 6px;white-space:nowrap}.badge[_ngcontent-%COMP%]{display:none}.navbar-right[_ngcontent-%COMP%]{gap:2px;flex-shrink:0;min-width:0}.profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}.weather-widget[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:4px;padding:4px 8px;min-width:0;flex-shrink:0;max-width:120px}.weather-widget[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]{display:none}.weather-widget[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{font-size:16px;margin:0;flex-shrink:0}.weather-widget[_ngcontent-%COMP%]   .weather-temp[_ngcontent-%COMP%]{display:none}.weather-widget[_ngcontent-%COMP%]   .weather-temp-mobile[_ngcontent-%COMP%]{display:inline!important;font-size:12px;font-weight:600;line-height:1;color:var(--notion-text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}.weather-widget[_ngcontent-%COMP%]   .weather-city[_ngcontent-%COMP%]{display:none}.weather-loading[_ngcontent-%COMP%]{font-size:10px;padding:4px 6px;max-width:80px;overflow:hidden;text-overflow:ellipsis}.icon-btn[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px}}@media (max-width: 480px){.navbar[_ngcontent-%COMP%]{padding:0 4px}.navbar-left[_ngcontent-%COMP%]{margin-left:40px;gap:4px}.brand[_ngcontent-%COMP%]{font-size:12px;padding:4px}.weather-widget[_ngcontent-%COMP%]{padding:3px 6px;gap:3px;max-width:90px}.weather-widget[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{font-size:14px}.weather-widget[_ngcontent-%COMP%]   .weather-temp-mobile[_ngcontent-%COMP%]{font-size:11px}.weather-loading[_ngcontent-%COMP%]{font-size:9px;padding:3px 5px;max-width:60px}.icon-btn[_ngcontent-%COMP%]{width:24px;height:24px;min-width:24px}.icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.avatar[_ngcontent-%COMP%]{width:20px;height:20px;font-size:10px}}.brand[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-text-primary);text-decoration:none;padding:4px 8px;border-radius:var(--notion-radius);transition:background 20ms ease-in 0s}.brand[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.badge[_ngcontent-%COMP%]{font-size:11px;background:var(--notion-gray-bg);color:var(--notion-text-secondary);border-radius:var(--notion-radius);padding:2px 6px;font-weight:500}.nav-links[_ngcontent-%COMP%]{display:none}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--notion-text-secondary);font-size:14px;font-weight:400;padding:4px 8px;border-radius:var(--notion-radius);transition:background 20ms ease-in 0s;position:relative}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--notion-text-primary);font-weight:500;background:var(--notion-bg-hover)}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;min-width:0;flex-shrink:0}.weather-widget[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 12px;background:var(--notion-bg-tertiary);border-radius:var(--notion-radius);border:1px solid var(--notion-border);transition:background 20ms ease-in 0s;cursor:default;min-width:0;flex-shrink:1;max-width:100%}.weather-widget[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.weather-icon[_ngcontent-%COMP%]{font-size:18px;line-height:1;flex-shrink:0}.weather-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px;min-width:0;overflow:hidden}.weather-temp[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--notion-text-primary);line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.weather-temp-mobile[_ngcontent-%COMP%]{display:none;white-space:nowrap;flex-shrink:0}.weather-city[_ngcontent-%COMP%]{font-size:10px;color:var(--notion-text-tertiary);line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.weather-loading[_ngcontent-%COMP%]{font-size:11px;color:var(--notion-text-secondary);padding:4px 8px;min-width:0;flex-shrink:0}@media (max-width: 992px){.weather-widget[_ngcontent-%COMP%]{padding:4px 8px;gap:6px}.weather-widget[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%], .weather-widget[_ngcontent-%COMP%]   .weather-temp[_ngcontent-%COMP%]{display:none}.weather-widget[_ngcontent-%COMP%]   .weather-temp-mobile[_ngcontent-%COMP%]{display:inline!important;font-size:13px;font-weight:600;line-height:1;color:var(--notion-text-primary)}.weather-widget[_ngcontent-%COMP%]   .weather-city[_ngcontent-%COMP%]{display:none}.weather-icon[_ngcontent-%COMP%]{font-size:16px}}.icon-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:var(--notion-radius);border:none;background:transparent;color:var(--notion-text-secondary);cursor:pointer;transition:background 20ms ease-in 0s}.icon-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.theme-toggle-btn[_ngcontent-%COMP%], .theme-toggle-btn[_ngcontent-%COMP%]:hover{color:var(--notion-text-primary)!important}.theme-toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:inherit}.lang-container[_ngcontent-%COMP%]{position:relative}.lang-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);right:0;background:var(--notion-bg);border:1px solid var(--notion-border);border-radius:var(--notion-radius);box-shadow:var(--notion-shadow-lg);min-width:140px;z-index:1001;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .15s ease-in}.lang-dropdown[_ngcontent-%COMP%]   .lang-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;gap:8px;padding:8px 12px;color:var(--notion-text-primary);font-size:14px;cursor:pointer;border:none;background:none;text-align:left;transition:background 20ms ease-in 0s}.lang-dropdown[_ngcontent-%COMP%]   .lang-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.lang-dropdown[_ngcontent-%COMP%]   .lang-item.active[_ngcontent-%COMP%]{background:var(--notion-bg-hover);font-weight:500}.lang-dropdown[_ngcontent-%COMP%]   .lang-label[_ngcontent-%COMP%]{flex:1}.lang-dropdown[_ngcontent-%COMP%]   .lang-code[_ngcontent-%COMP%]{font-size:11px;color:var(--notion-text-tertiary);font-weight:500}.profile-container[_ngcontent-%COMP%]{position:relative}.profile[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:2px 6px;border-radius:var(--notion-radius);cursor:pointer;transition:background 20ms ease-in 0s;position:relative}.profile[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.avatar[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:3px;display:inline-flex;align-items:center;justify-content:center;color:#fff;background:var(--notion-text-primary);font-weight:500;font-size:11px;overflow:hidden;flex-shrink:0}.avatar.has-photo[_ngcontent-%COMP%]{padding:0}.avatar[_ngcontent-%COMP%]   .avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.dark-theme[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{background:#ffffff26!important;color:var(--notion-text-primary)!important}.name[_ngcontent-%COMP%]{color:var(--notion-text-primary);font-weight:400;font-size:14px}.dropdown-arrow[_ngcontent-%COMP%]{color:var(--notion-text-tertiary);transition:transform 20ms ease-in 0s;flex-shrink:0}.profile[_ngcontent-%COMP%]:hover   .dropdown-arrow[_ngcontent-%COMP%]{color:var(--notion-text-secondary)}.profile-container[_ngcontent-%COMP%]:hover   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.profile-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);right:0;background:var(--notion-bg);border:1px solid var(--notion-border);border-radius:var(--notion-radius);box-shadow:var(--notion-shadow-lg);min-width:160px;z-index:1001;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .15s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;color:var(--notion-text-primary);font-size:14px;cursor:pointer;transition:background 20ms ease-in 0s}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.dropdown-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--notion-text-secondary);flex-shrink:0}.dropdown-item[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:var(--notion-text-primary)}.dropdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}@media (max-width: 768px){.profile-dropdown[_ngcontent-%COMP%]{right:-8px;min-width:140px}}.navbar.navbar-rtl[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]{flex-direction:row-reverse!important}.navbar.navbar-rtl[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{flex-direction:row-reverse!important;margin-left:0!important;transition:margin-right .1s ease-in 0s}.navbar.navbar-rtl[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%], .navbar.navbar-rtl[_ngcontent-%COMP%]   .weather-widget[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .weather-widget[_ngcontent-%COMP%]{flex-direction:row-reverse!important}.navbar.navbar-rtl[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]{flex-direction:column;text-align:right}.navbar.navbar-rtl[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{flex-direction:row-reverse!important}.navbar.navbar-rtl[_ngcontent-%COMP%]   .lang-dropdown[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .lang-dropdown[_ngcontent-%COMP%]{right:auto!important;left:0!important;text-align:right}.navbar.navbar-rtl[_ngcontent-%COMP%]   .lang-dropdown[_ngcontent-%COMP%]   .lang-item[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .lang-dropdown[_ngcontent-%COMP%]   .lang-item[_ngcontent-%COMP%]{flex-direction:row-reverse!important;text-align:right}.navbar.navbar-rtl[_ngcontent-%COMP%]   .profile-dropdown[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .profile-dropdown[_ngcontent-%COMP%]{right:auto!important;left:0!important;text-align:right}.navbar.navbar-rtl[_ngcontent-%COMP%]   .profile-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%], .navbar.navbar-rtl[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .profile-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{flex-direction:row-reverse!important;text-align:right}@media (max-width: 768px){.navbar.navbar-rtl[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{margin-left:0!important;margin-right:48px!important}.navbar.navbar-rtl[_ngcontent-%COMP%]   .profile-dropdown[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .profile-dropdown[_ngcontent-%COMP%]{right:auto!important;left:-8px!important}}@media (max-width: 480px){.navbar.navbar-rtl[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%], .navbar[dir=rtl][_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{margin-right:40px!important}}"]})}}return n})();function he(n,l){if(n&1){let t=y();o(0,"div",19),v("click",function(){_(t);let i=p();return C(i.toggleSidebar())}),r()}}function fe(n,l){n&1&&(o(0,"span",20),d(1,"DailyFix"),r())}function ue(n,l){if(n&1){let t=y();o(0,"button",21),v("click",function(){_(t);let i=p();return C(i.toggleSidebar())}),M(),o(1,"svg",22),b(2,"path",23),r()()}}function ve(n,l){if(n&1){let t=y();o(0,"button",24),v("click",function(){_(t);let i=p();return C(i.toggleSidebar())}),M(),o(1,"svg",22),b(2,"path",25),r()()}}function be(n,l){n&1&&(o(0,"div",26),d(1),m(2,"translate"),r()),n&2&&(a(),f(g(2,1,"nav.title")))}function xe(n,l){if(n&1&&(o(0,"span",29),d(1),m(2,"translate"),r()),n&2){let t=p().$implicit;a(),f(g(2,1,t.labelKey))}}function _e(n,l){if(n&1){let t=y();o(0,"a",27),m(1,"translate"),v("click",function(){_(t);let i=p();return C(i.onNavItemClick())}),o(2,"span",28),d(3),r(),u(4,xe,3,3,"span",18),r()}if(n&2){let t=l.$implicit,e=p();s("routerLink",t.route)("title",e.isCollapsed?g(1,4,t.labelKey):""),a(3),f(t.icon),a(),s("ngIf",!e.isCollapsed)}}function Ce(n,l){n&1&&(o(0,"span",29),d(1),m(2,"translate"),r()),n&2&&(a(),f(g(2,1,"nav.logout")))}var Ht=(()=>{class n{constructor(t,e,i,c){this.sidebarService=t,this.authService=e,this.router=i,this.i18n=c,this.isCollapsed=!1,this.isMobile=!1,this.navigationItems=[{icon:"\u{1F3E0}",labelKey:"nav.home",route:"/home"},{icon:"\u2713",labelKey:"nav.tasks",route:"/tasks"},{icon:"\u{1F4C5}",labelKey:"nav.calendar",route:"/calendar"},{icon:"\u2764\uFE0F",labelKey:"nav.health",route:"/health"},{icon:"\u{1F4B0}",labelKey:"nav.finance",route:"/finance"},{icon:"\u{1F3E1}",labelKey:"nav.homeOrg",route:"/home-org"},{icon:"\u{1F465}",labelKey:"nav.social",route:"/social"},{icon:"\u{1F9D8}",labelKey:"nav.wellness",route:"/wellness"}]}onResize(t){this.checkMobile()}checkMobile(){let t=this.isMobile;this.isMobile=window.innerWidth<=768,this.isMobile&&!t&&(this.isCollapsed=!0)}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.isMobile&&(this.isCollapsed?document.body.style.overflow="":document.body.style.overflow="hidden"),setTimeout(()=>{this.updateMainContentMargin()},0)}updateMainContentMargin(){let t=document.querySelector(".main-content");if(!t)return;let e=document.documentElement.getAttribute("dir")==="rtl"||document.querySelector("app-root")?.classList.contains("dir-rtl");this.isMobile?(t.style.marginLeft="",t.style.marginRight=""):e?(t.style.marginLeft="0",t.style.marginRight=this.isCollapsed?"48px":"240px"):(t.style.marginRight="",t.style.marginLeft=this.isCollapsed?"48px":"240px")}ngOnInit(){this.checkMobile(),this.isMobile&&(this.isCollapsed=!0),this.updateMainContentMargin(),this.sidebarSubscription=this.sidebarService.toggleSidebar$.subscribe(()=>{this.toggleSidebar()}),this.langSubscription=this.i18n.onLangChange.subscribe(()=>{setTimeout(()=>this.updateMainContentMargin(),0)})}onNavItemClick(){this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow="",this.updateMainContentMargin())}logout(){this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow=""),this.authService.logout()}ngOnDestroy(){document.body.style.overflow="",this.sidebarSubscription?.unsubscribe(),this.langSubscription?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(x(W),x(T),x(D),x(L))}}static{this.\u0275cmp=S({type:n,selectors:[["app-sidebar"]],hostBindings:function(e,i){e&1&&v("resize",function(h){return i.onResize(h)},!1,H)},standalone:!0,features:[k],decls:21,vars:12,consts:[["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"sidebar"],[1,"sidebar-header"],[1,"sidebar-brand"],[1,"brand-icon"],["class","brand-text",4,"ngIf"],["class","collapse-btn",3,"click",4,"ngIf"],["class","expand-btn",3,"click",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-section-title",4,"ngIf"],["routerLinkActive","active","class","nav-item",3,"routerLink","title","click",4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"nav-item","logout-item",3,"click","title"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"nav-icon"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],["class","nav-label",4,"ngIf"],[1,"sidebar-overlay",3,"click"],[1,"brand-text"],[1,"collapse-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","none"],["d","M10 12L6 8L10 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"expand-btn",3,"click"],["d","M6 12L10 8L6 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-section-title"],["routerLinkActive","active",1,"nav-item",3,"click","routerLink","title"],[1,"nav-icon"],[1,"nav-label"]],template:function(e,i){e&1&&(u(0,he,1,0,"div",0),o(1,"aside",1)(2,"div",2)(3,"div",3)(4,"span",4),d(5,"\u{1F4DD}"),r(),u(6,fe,2,0,"span",5),r(),u(7,ue,3,0,"button",6)(8,ve,3,0,"button",7),r(),o(9,"nav",8)(10,"div",9),u(11,be,3,3,"div",10)(12,_e,5,6,"a",11),r()(),o(13,"div",12)(14,"button",13),m(15,"translate"),v("click",function(){return i.logout()}),M(),o(16,"svg",14),b(17,"path",15)(18,"polyline",16)(19,"line",17),r(),u(20,Ce,3,3,"span",18),r()()()),e&2&&(s("ngIf",!i.isCollapsed&&i.isMobile),a(),O("collapsed",i.isCollapsed),a(5),s("ngIf",!i.isCollapsed),a(),s("ngIf",!i.isCollapsed),a(),s("ngIf",i.isCollapsed),a(3),s("ngIf",!i.isCollapsed),a(),s("ngForOf",i.navigationItems),a(2),s("title",i.isCollapsed?g(15,10,"nav.logout"):""),a(6),s("ngIf",!i.isCollapsed))},dependencies:[I,N,A,G,$,J,z],styles:['.sidebar[_ngcontent-%COMP%]{position:fixed!important;left:0;top:45px;width:240px;height:calc(100vh - 45px);background:var(--notion-bg);border-right:1px solid var(--notion-border);display:flex;flex-direction:column;transition:width .1s ease-in 0s,transform .2s ease-in 0s;z-index:100;overflow-y:auto;overflow-x:hidden;will-change:width;transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{width:48px}@media (max-width: 1024px){.sidebar[_ngcontent-%COMP%]{position:fixed!important;width:48px}.sidebar[_ngcontent-%COMP%]:not(.collapsed){width:240px;z-index:1000;box-shadow:var(--notion-shadow-lg)}}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;inset:45px 0 0;background:#00000080;z-index:999;display:none}@media (max-width: 768px){.sidebar-overlay[_ngcontent-%COMP%]{display:block}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed!important;width:280px;max-width:85vw;transform:translate(-100%);z-index:1000;box-shadow:var(--notion-shadow-lg);transition:transform .2s ease-in 0s}.sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar.collapsed[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:100%;max-width:100%;transform:translate(-100%)}.sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;min-height:45px;border-bottom:1px solid var(--notion-border);position:sticky;top:0;background:var(--notion-bg);z-index:10}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.brand-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.brand-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.collapse-btn[_ngcontent-%COMP%], .expand-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:none;background:transparent;color:var(--notion-text-secondary);cursor:pointer;border-radius:var(--notion-radius);display:flex;align-items:center;justify-content:center;transition:background 20ms ease-in 0s;flex-shrink:0}.collapse-btn[_ngcontent-%COMP%]:hover, .expand-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:4px 0;overflow-y:auto}.nav-section[_ngcontent-%COMP%]{margin-bottom:8px}.nav-section-title[_ngcontent-%COMP%]{padding:4px 12px;font-size:11px;font-weight:500;color:var(--notion-text-tertiary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:2px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 8px 4px 12px;color:var(--notion-text-secondary);text-decoration:none;font-size:14px;font-weight:400;border-radius:0;transition:background 20ms ease-in 0s;position:relative;min-height:28px}.nav-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.nav-item.active[_ngcontent-%COMP%]{background:var(--notion-bg-hover);color:var(--notion-text-primary);font-weight:500}.nav-item.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:2px;background:var(--notion-text-primary)}.nav-icon[_ngcontent-%COMP%]{font-size:16px;width:20px;text-align:center;flex-shrink:0}.nav-label[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{justify-content:center;padding:4px}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{display:none}.sidebar-footer[_ngcontent-%COMP%]{border-top:1px solid var(--notion-border);padding:4px 0;margin-top:auto}.logout-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:4px 8px 4px 12px;color:var(--notion-text-secondary);background:transparent;border:none;text-align:left;font-size:14px;font-weight:400;cursor:pointer;transition:background 20ms ease-in 0s,color 20ms ease-in 0s;min-height:28px}.logout-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-red)}.logout-item[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:inherit}.sidebar.collapsed[_ngcontent-%COMP%]   .logout-item[_ngcontent-%COMP%]{justify-content:center;padding:4px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent}.sidebar[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--notion-border)}']})}}return n})();function we(n,l){if(n&1){let t=y();o(0,"div",2),v("click",function(){_(t);let i=p();return C(i.toggleSidebar())}),r()}}function Me(n,l){n&1&&(o(0,"span",22),d(1),m(2,"translate"),r()),n&2&&(a(),f(g(2,1,"adminSidebar.panel")))}function ye(n,l){if(n&1){let t=y();o(0,"button",23),v("click",function(){_(t);let i=p(2);return C(i.toggleSidebar())}),M(),o(1,"svg",24),b(2,"path",25),r()()}}function Pe(n,l){if(n&1){let t=y();o(0,"button",26),v("click",function(){_(t);let i=p(2);return C(i.toggleSidebar())}),M(),o(1,"svg",24),b(2,"path",27),r()()}}function Oe(n,l){n&1&&(o(0,"div",28),d(1,"Administration"),r())}function Se(n,l){if(n&1&&(o(0,"span",31),d(1),r()),n&2){let t=p().$implicit;a(),f(t.label)}}function ke(n,l){if(n&1){let t=y();o(0,"a",29),v("click",function(){_(t);let i=p(2);return C(i.onNavItemClick())}),o(1,"span",30),d(2),r(),u(3,Se,2,1,"span",21),r()}if(n&2){let t=l.$implicit,e=p(2);s("routerLink",t.route)("title",e.isCollapsed?t.label:""),a(2),f(t.icon),a(),s("ngIf",!e.isCollapsed)}}function Ie(n,l){if(n&1){let t=y();o(0,"div",11)(1,"div",28),d(2),m(3,"translate"),r(),o(4,"a",32),v("click",function(){_(t);let i=p(2);return C(i.navigateToApp())}),o(5,"span",30),d(6,"\u{1F3E0}"),r(),o(7,"span",31),d(8),m(9,"translate"),r()()()}n&2&&(a(2),f(g(3,2,"adminSidebar.back")),a(6),f(g(9,4,"adminSidebar.app")))}function Te(n,l){n&1&&(o(0,"span",31),d(1),m(2,"translate"),r()),n&2&&(a(),f(g(2,1,"nav.logout")))}function Ee(n,l){if(n&1){let t=y();o(0,"aside",3)(1,"div",4)(2,"div",5)(3,"span",6),d(4,"\u{1F6E1}\uFE0F"),r(),u(5,Me,3,3,"span",7),r(),u(6,ye,3,0,"button",8)(7,Pe,3,0,"button",9),r(),o(8,"nav",10)(9,"div",11),u(10,Oe,2,0,"div",12)(11,ke,4,4,"a",13),r(),u(12,Ie,10,6,"div",14),r(),o(13,"div",15)(14,"button",16),v("click",function(){_(t);let i=p();return C(i.logout())}),M(),o(15,"svg",17),b(16,"path",18)(17,"polyline",19)(18,"line",20),r(),u(19,Te,3,3,"span",21),r()()()}if(n&2){let t=p();O("collapsed",t.isCollapsed),a(5),s("ngIf",!t.isCollapsed),a(),s("ngIf",!t.isCollapsed),a(),s("ngIf",t.isCollapsed),a(3),s("ngIf",!t.isCollapsed),a(),s("ngForOf",t.navigationItems),a(),s("ngIf",!t.isCollapsed),a(2),s("title",t.isCollapsed?"D\xE9connexion":""),a(5),s("ngIf",!t.isCollapsed)}}var Ut=(()=>{class n{constructor(t,e,i){this.sidebarService=t,this.authService=e,this.router=i,this.isCollapsed=!1,this.isMobile=!1,this.navigationItems=[{icon:"\u{1F4CA}",label:"Dashboard",route:"/admin"},{icon:"\u{1F465}",label:"Gestion Utilisateurs",route:"/admin"},{icon:"\u{1F4C8}",label:"Statistiques",route:"/admin"}]}onResize(t){this.checkMobile()}checkMobile(){let t=this.isMobile;this.isMobile=window.innerWidth<=768,this.isMobile&&!t&&(this.isCollapsed=!0)}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.isMobile&&(this.isCollapsed?document.body.style.overflow="":document.body.style.overflow="hidden"),setTimeout(()=>{this.updateMainContentMargin()},0)}updateMainContentMargin(){let t=document.querySelector(".main-content");t&&(this.isMobile?t.style.marginLeft="0":t.style.marginLeft=this.isCollapsed?"48px":"240px")}ngOnInit(){let t=this.authService.getCurrentUser();if(!t||t.role!=="admin"){console.warn("Acc\xE8s non autoris\xE9 \xE0 la sidebar admin. Redirection vers /home"),this.router.navigate(["/home"]);return}this.checkMobile(),this.isMobile&&(this.isCollapsed=!0),this.updateMainContentMargin(),this.sidebarSubscription=this.sidebarService.toggleSidebar$.subscribe(()=>{this.toggleSidebar()})}onNavItemClick(){this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow="",this.updateMainContentMargin())}navigateToApp(){this.router.navigate(["/home"]).then(()=>{this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow="",this.updateMainContentMargin())})}logout(){this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow=""),this.authService.logout()}ngOnDestroy(){document.body.style.overflow="",this.sidebarSubscription&&this.sidebarSubscription.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(x(W),x(T),x(D))}}static{this.\u0275cmp=S({type:n,selectors:[["app-admin-sidebar"]],hostBindings:function(e,i){e&1&&v("resize",function(h){return i.onResize(h)},!1,H)},standalone:!0,features:[k],decls:2,vars:2,consts:[["class","sidebar-overlay",3,"click",4,"ngIf"],["class","admin-sidebar",3,"collapsed",4,"ngIf"],[1,"sidebar-overlay",3,"click"],[1,"admin-sidebar"],[1,"sidebar-header"],[1,"sidebar-brand"],[1,"brand-icon"],["class","brand-text",4,"ngIf"],["class","collapse-btn",3,"click",4,"ngIf"],["class","expand-btn",3,"click",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-section-title",4,"ngIf"],["routerLinkActive","active","class","nav-item",3,"routerLink","title","click",4,"ngFor","ngForOf"],["class","nav-section",4,"ngIf"],[1,"sidebar-footer"],[1,"nav-item","logout-item",3,"click","title"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"nav-icon"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],["class","nav-label",4,"ngIf"],[1,"brand-text"],[1,"collapse-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","none"],["d","M10 12L6 8L10 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"expand-btn",3,"click"],["d","M6 12L10 8L6 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-section-title"],["routerLinkActive","active",1,"nav-item",3,"click","routerLink","title"],[1,"nav-icon"],[1,"nav-label"],["routerLink","/home",1,"nav-item",3,"click"]],template:function(e,i){if(e&1&&u(0,we,1,0,"div",0)(1,Ee,20,10,"aside",1),e&2){let c;s("ngIf",!i.isCollapsed&&i.isMobile),a(),s("ngIf",((c=i.authService.getCurrentUser())==null?null:c.role)==="admin")}},dependencies:[I,N,A,G,$,J,z],styles:['.admin-sidebar[_ngcontent-%COMP%]{position:fixed!important;left:0;top:45px;width:240px;height:calc(100vh - 45px);background:var(--notion-bg);border-right:2px solid var(--notion-red);display:flex;flex-direction:column;transition:width .1s ease-in 0s,transform .2s ease-in 0s;z-index:100;overflow-y:auto;overflow-x:hidden;will-change:width;transform:translate(0)}.admin-sidebar.collapsed[_ngcontent-%COMP%]{width:48px}@media (max-width: 1024px){.admin-sidebar[_ngcontent-%COMP%]{position:fixed!important;width:48px}.admin-sidebar[_ngcontent-%COMP%]:not(.collapsed){width:240px;z-index:1000;box-shadow:var(--notion-shadow-lg)}}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;inset:45px 0 0;background:#00000080;z-index:999;display:none}@media (max-width: 768px){.sidebar-overlay[_ngcontent-%COMP%]{display:block}}@media (max-width: 768px){.admin-sidebar[_ngcontent-%COMP%]{position:fixed!important;width:280px;max-width:85vw;transform:translate(-100%);z-index:1000;box-shadow:var(--notion-shadow-lg);transition:transform .2s ease-in 0s}.admin-sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.admin-sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.admin-sidebar[_ngcontent-%COMP%]{width:100%;max-width:100%;transform:translate(-100%)}.admin-sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.admin-sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;min-height:45px;border-bottom:1px solid var(--notion-border);position:sticky;top:0;background:var(--notion-bg);z-index:10}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.brand-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.brand-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-red);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.collapse-btn[_ngcontent-%COMP%], .expand-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:none;background:transparent;color:var(--notion-text-secondary);cursor:pointer;border-radius:var(--notion-radius);display:flex;align-items:center;justify-content:center;transition:background 20ms ease-in 0s;flex-shrink:0}.collapse-btn[_ngcontent-%COMP%]:hover, .expand-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:4px 0;overflow-y:auto}.nav-section[_ngcontent-%COMP%]{margin-bottom:8px}.nav-section-title[_ngcontent-%COMP%]{padding:4px 12px;font-size:11px;font-weight:500;color:var(--notion-text-tertiary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:2px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 8px 4px 12px;color:var(--notion-text-secondary);text-decoration:none;font-size:14px;font-weight:400;border-radius:0;transition:background 20ms ease-in 0s;position:relative;min-height:28px}.nav-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.nav-item.active[_ngcontent-%COMP%]{background:var(--notion-red-bg);color:var(--notion-red);font-weight:500}.nav-item.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:2px;background:var(--notion-red)}.nav-icon[_ngcontent-%COMP%]{font-size:16px;width:20px;text-align:center;flex-shrink:0}.nav-label[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{justify-content:center;padding:4px}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{display:none}.sidebar-footer[_ngcontent-%COMP%]{border-top:1px solid var(--notion-border);padding:4px 0;margin-top:auto}.logout-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:4px 8px 4px 12px;color:var(--notion-text-secondary);background:transparent;border:none;text-align:left;font-size:14px;font-weight:400;cursor:pointer;transition:background 20ms ease-in 0s,color 20ms ease-in 0s;min-height:28px}.logout-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-red)}.logout-item[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:inherit}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .logout-item[_ngcontent-%COMP%]{justify-content:center;padding:4px}.admin-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.admin-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent}.admin-sidebar[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--notion-border)}']})}}return n})();function Ne(n,l){if(n&1){let t=y();o(0,"div",2)(1,"span",3),d(2),r(),o(3,"span",4),d(4),r(),o(5,"button",5),v("click",function(){let i=_(t).$implicit,c=p();return C(c.close(i.id))}),d(6,"\xD7"),r()()}if(n&2){let t=l.$implicit,e=p();ft("toast-"+t.type),s("@slideIn",void 0),a(2),f(e.getIcon(t.type)),a(2),f(t.message)}}var $t=(()=>{class n{constructor(t){this.toastService=t,this.toasts$=this.toastService.toasts$}getIcon(t){return{success:"\u2713",error:"\u2715",warning:"\u26A0",info:"\u2139"}[t]||"\u2139"}close(t){this.toastService.remove(t)}static{this.\u0275fac=function(e){return new(e||n)(x(Dt))}}static{this.\u0275cmp=S({type:n,selectors:[["app-toast"]],standalone:!0,features:[k],decls:3,vars:3,consts:[[1,"toast-container"],["class","toast",3,"class",4,"ngFor","ngForOf"],[1,"toast"],[1,"toast-icon"],[1,"toast-message"],["aria-label","Close",1,"toast-close",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0),u(1,Ne,7,5,"div",1),m(2,"async"),r()),e&2&&(a(),s("ngForOf",g(2,1,i.toasts$)))},dependencies:[I,N,_t],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:70px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:12px;max-width:400px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;background:var(--notion-bg);border-radius:8px;box-shadow:0 4px 12px #00000026;border-left:4px solid;animation:_ngcontent-%COMP%_slideIn .3s ease-out;min-width:300px}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}.toast-success[_ngcontent-%COMP%]{border-left-color:var(--notion-green);background:var(--notion-green-bg)}.toast-error[_ngcontent-%COMP%]{border-left-color:var(--notion-red);background:var(--notion-red-bg)}.toast-warning[_ngcontent-%COMP%]{border-left-color:var(--notion-orange);background:var(--notion-orange-bg)}.toast-info[_ngcontent-%COMP%]{border-left-color:var(--notion-blue);background:var(--notion-blue-bg)}.toast-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:14px;color:var(--notion-text-primary);line-height:1.4}.toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:var(--notion-text-secondary);cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background .2s}.toast-close[_ngcontent-%COMP%]:hover{background:#0000000d}@media (max-width: 768px){.toast-container[_ngcontent-%COMP%]{right:16px;left:16px;max-width:none}.toast[_ngcontent-%COMP%]{min-width:auto}}"]})}}return n})();function Ae(n,l){n&1&&(o(0,"div",2),b(1,"div",3),o(2,"span",4),d(3),m(4,"translate"),r()()),n&2&&(a(3),f(g(4,1,"common.loading")))}function De(n,l){n&1&&b(0,"app-navbar")}function Le(n,l){n&1&&b(0,"app-sidebar")}function ze(n,l){n&1&&b(0,"app-admin-sidebar")}function Ve(n,l){if(n&1&&(ut(0),u(1,De,1,0,"app-navbar",1)(2,Le,1,0,"app-sidebar",1)(3,ze,1,0,"app-admin-sidebar",1),b(4,"app-toast"),o(5,"main",5),b(6,"router-outlet"),r(),vt()),n&2){let t=p();a(),s("ngIf",t.showNavbar),a(),s("ngIf",t.showSidebar),a(),s("ngIf",t.showAdminSidebar),a(2),O("no-sidebar",!t.showSidebar&&!t.showAdminSidebar)}}var Gt=(()=>{class n{constructor(t,e,i,c,h,w){this.router=t,this.authService=e,this.notificationService=i,this.themeService=c,this.i18n=h,this.cdr=w,this.title="dailyFix",this.showNavbar=!1,this.showSidebar=!1,this.showAdminSidebar=!1,this.appReady=!1,this.routerSubscription=this.router.events.pipe(mt(P=>P instanceof Pt)).subscribe(P=>{let F=P.urlAfterRedirects||P.url;this.updateVisibility(F)})}ngOnInit(){this.initSubscription=this.authService.ensureAuthenticated$().subscribe(()=>{this.appReady=!0,this.cdr.detectChanges()});let t=localStorage.getItem("dailyfix_locale");(t==="en"||t==="ar")&&this.i18n.use(t).subscribe(),this.applyDirAndLang(),this.langSubscription=this.i18n.onLangChange.subscribe(()=>{this.applyDirAndLang(),this.cdr.detectChanges()}),this.themeService.watchSystemPreference(),this.userSubscription=this.authService.currentUser$.subscribe(()=>{setTimeout(()=>{this.updateVisibility(this.router.url)},0)});let e=this.router.url;this.updateVisibility(e)}ngOnDestroy(){this.initSubscription?.unsubscribe(),this.userSubscription?.unsubscribe(),this.routerSubscription?.unsubscribe(),this.langSubscription?.unsubscribe()}get isRtl(){return(this.i18n.currentLang||localStorage.getItem("dailyfix_locale")||"fr")==="ar"}applyDirAndLang(){let t=document.documentElement,e=this.i18n.currentLang||localStorage.getItem("dailyfix_locale")||"fr",i=e==="ar"?"rtl":"ltr";t.setAttribute("lang",e),t.setAttribute("dir",i)}updateVisibility(t){let e=(t||"").replace(/^\/#/,"").split("?")[0],i=e==="/login"||e==="/",c=e.startsWith("/admin"),h=this.authService.hasToken(),w=this.authService.getCurrentUser(),P=!!(w&&w.role==="admin");this.showNavbar=h&&!i,this.showAdminSidebar=!!(h&&!i&&c&&P),this.showSidebar=!!(h&&!i&&!c),this.cdr.detectChanges()}static{this.\u0275fac=function(e){return new(e||n)(x(D),x(T),x(et),x(Q),x(L),x(U))}}static{this.\u0275cmp=S({type:n,selectors:[["app-root"]],hostVars:2,hostBindings:function(e,i){e&2&&O("dir-rtl",i.isRtl)},standalone:!0,features:[k],decls:2,vars:2,consts:[["class","app-loader","aria-hidden","false","role","status",4,"ngIf"],[4,"ngIf"],["aria-hidden","false","role","status",1,"app-loader"],[1,"app-loader-spinner"],[1,"app-loader-text"],[1,"main-content"]],template:function(e,i){e&1&&u(0,Ae,5,3,"div",0)(1,Ve,7,5,"ng-container",1),e&2&&(s("ngIf",!i.appReady),a(),s("ngIf",i.appReady))},dependencies:[Ot,Bt,Ht,Ut,I,A,z,$t],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;overflow-x:hidden}.app-loader[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;background:var(--notion-bg-primary, #fff);color:var(--notion-text-primary, #333)}.app-loader-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--notion-border, #e0e0e0);border-top-color:var(--notion-accent, #2383e2);border-radius:50%;animation:_ngcontent-%COMP%_app-loader-spin .9s linear infinite}.app-loader-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}@keyframes _ngcontent-%COMP%_app-loader-spin{to{transform:rotate(360deg)}}.main-content[_ngcontent-%COMP%]{margin-left:240px;margin-top:45px;min-height:calc(100vh - 45px);background:var(--notion-bg-secondary);transition:margin-left .1s ease-in 0s;overflow-x:hidden;box-sizing:border-box}.main-content.no-sidebar[_ngcontent-%COMP%]{margin-left:0;margin-top:0;min-height:100vh}html[dir="rtl"][_nghost-%COMP%]   .main-content.no-sidebar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .main-content.no-sidebar[_ngcontent-%COMP%]{margin-right:0}@media (max-width: 1024px){.main-content[_ngcontent-%COMP%]{margin-left:48px}}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0;margin-top:45px}}']})}}return n})();yt(Gt,Vt).catch(n=>console.error(n));
