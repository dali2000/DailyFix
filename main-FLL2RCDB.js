import{a as V}from"./chunk-QXVOHEG6.js";import{a as dt}from"./chunk-J6BR7BVO.js";import{a as pt}from"./chunk-V3PZL3OI.js";import{a as mt}from"./chunk-CROM57RR.js";import{a as ht}from"./chunk-52XP4IFS.js";import{$ as f,Aa as P,Ba as it,C as _,Ca as ot,D as C,Da as rt,E as b,Ea as at,F,Fa as st,Ga as T,Ha as L,Ia as ct,J as E,Ja as lt,K as j,Ka as A,L as s,M as g,Ma as y,P as h,Q,R as l,T as N,V as o,W as r,X as m,_ as w,aa as u,ba as X,c as W,da as p,e as G,ea as x,f as K,fa as tt,g as Y,i as B,l as Z,la as S,m as q,s as O,ta as et,ua as nt,v as I,w as J,wa as z,xa as k,y as M}from"./chunk-76YESKQ4.js";var ft=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-I2XBNELS.js").then(i=>i.LoginComponent)},{path:"home",loadComponent:()=>import("./chunk-SVO44OJJ.js").then(i=>i.HomeComponent)},{path:"tasks",loadComponent:()=>import("./chunk-MFDZV4ET.js").then(i=>i.TasksComponent)},{path:"calendar",loadComponent:()=>import("./chunk-IJV5P52I.js").then(i=>i.CalendarComponent)},{path:"health",loadComponent:()=>import("./chunk-ZYOEQMKQ.js").then(i=>i.HealthComponent)},{path:"finance",loadComponent:()=>import("./chunk-G2R7M2GJ.js").then(i=>i.FinanceComponent)},{path:"home-org",loadComponent:()=>import("./chunk-KBUUIMTR.js").then(i=>i.HomeOrgComponent)},{path:"social",loadComponent:()=>import("./chunk-WXPSE6MJ.js").then(i=>i.SocialComponent)},{path:"wellness",loadComponent:()=>import("./chunk-POFV34VN.js").then(i=>i.WellnessComponent)},{path:"settings",loadComponent:()=>import("./chunk-KBY5FIYI.js").then(i=>i.SettingsComponent)}];var ut=(i,d)=>{try{let e=J(y).getToken();if(e){let a=i.clone({setHeaders:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});return d(a)}let n=i.clone({setHeaders:{"Content-Type":"application/json"}});return d(n)}catch(t){return console.error("Interceptor error:",t),d(i)}};var gt={providers:[lt(ft),{provide:et,useClass:nt},it(ot([ut]))]};var H=(()=>{class i{constructor(t,e,n,a,c){this.taskService=t,this.financeService=e,this.healthService=n,this.homeService=a,this.authService=c,this.checkInterval=60*1e3,this.lastNotificationTime={},this.notificationCooldown=60*1e3,this.notificationsSubject=new Y([]),this.notifications$=this.notificationsSubject.asObservable(),this.notifications=[],this.initializeNotifications()}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe()}initializeNotifications(){this.requestPermission(),this.authSubscription=this.authService.currentUser$.subscribe(t=>{t?this.startNotifications():this.stopNotifications()})}requestPermission(){return W(this,null,function*(){"Notification"in window&&Notification.permission==="default"&&(yield Notification.requestPermission())})}startNotifications(){this.checkAndNotify(),this.intervalSubscription=Z(this.checkInterval).subscribe(()=>{this.checkAndNotify()})}stopNotifications(){this.intervalSubscription&&(this.intervalSubscription.unsubscribe(),this.intervalSubscription=void 0)}checkAndNotify(){!("Notification"in window)||Notification.permission!=="granted"||this.authService.isAuthenticated()&&(this.checkIncompleteTasks(),this.checkExpenses(),this.checkWaterIntake(),this.checkHouseholdTasks())}checkIncompleteTasks(){let e=this.taskService.getTasks().filter(n=>!n.completed&&n.status!=="done"&&(!n.dueDate||new Date(n.dueDate)>=new Date));if(e.length>0){let n="incomplete_tasks";if(this.canSendNotification(n)){let a=e.slice(0,3).map(v=>v.title).join(", "),c=e.length>3?` et ${e.length-3} autres`:"";this.sendNotification("\u{1F4CB} T\xE2ches \xE0 compl\xE9ter",`Vous avez ${e.length} t\xE2che(s) non compl\xE9t\xE9e(s): ${a}${c}`,n,"task")}}}checkExpenses(){let t=new Date;if(this.financeService.getExpenses().filter(a=>new Date(a.date).toDateString()===t.toDateString()).length===0&&t.getHours()>=14&&t.getHours()<20){let a="add_expenses_"+t.toDateString();this.canSendNotification(a)&&this.sendNotification("\u{1F4B0} Rappel de d\xE9penses","N'oubliez pas d'ajouter vos d\xE9penses d'aujourd'hui !",a,"expense")}}checkWaterIntake(){let t=this.healthService.getTodayWaterIntake(),e=2e3,a=new Date().getHours();if(t<e*.5&&a>=8&&a<20&&a%2===0){let v="drink_water_"+a;this.canSendNotification(v)&&this.sendNotification("\u{1F4A7} Rappel: Boire de l'eau",`Vous avez bu ${t}ml aujourd'hui. N'oubliez pas de boire de l'eau r\xE9guli\xE8rement !`,v,"water")}}checkHouseholdTasks(){let e=this.homeService.getHouseholdTasks().filter(n=>{if(n.completed)return!1;if(n.nextDueDate){let a=new Date(n.nextDueDate),c=new Date;return c.setHours(0,0,0,0),a.setHours(0,0,0,0),a<=c}return!0});if(e.length>0){let n="household_tasks";if(this.canSendNotification(n)){let a=e.slice(0,2).map(v=>v.name).join(", "),c=e.length>2?` et ${e.length-2} autres`:"";this.sendNotification("\u{1F3E0} T\xE2ches m\xE9nag\xE8res",`Vous avez ${e.length} t\xE2che(s) m\xE9nag\xE8re(s) \xE0 faire: ${a}${c?" "+c:""}`,n,"household")}}}canSendNotification(t){let e=Date.now(),n=this.lastNotificationTime[t]||0;return e-n>=this.notificationCooldown?(this.lastNotificationTime[t]=e,!0):!1}sendNotification(t,e,n,a="task"){let c={id:`${n}_${Date.now()}`,title:t,message:e,type:a,timestamp:new Date,read:!1};if(this.notifications.unshift(c),this.notifications.length>50&&(this.notifications=this.notifications.slice(0,50)),this.notificationsSubject.next([...this.notifications]),"Notification"in window&&Notification.permission==="granted"){let v=new Notification(t,{body:e,icon:"/favicon.ico",tag:n,requireInteraction:!1,silent:!1});setTimeout(()=>{v.close()},5e3),v.onclick=()=>{window.focus(),v.close()}}}testNotification(){this.sendNotification("Test de notification","Les notifications fonctionnent correctement !","test","task")}markAsRead(t){let e=this.notifications.find(n=>n.id===t);e&&(e.read=!0,this.notificationsSubject.next([...this.notifications]))}markAllAsRead(){this.notifications.forEach(t=>t.read=!0),this.notificationsSubject.next([...this.notifications])}removeNotification(t){this.notifications=this.notifications.filter(e=>e.id!==t),this.notificationsSubject.next([...this.notifications])}getUnreadCount(){return this.notifications.filter(t=>!t.read).length}getNotifications(){return[...this.notifications]}static{this.\u0275fac=function(e){return new(e||i)(I(dt),I(mt),I(pt),I(ht),I(y))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function St(i,d){if(i&1&&(o(0,"span",6),p(1),r()),i&2){let t=u();s(),x(t.unreadCount>99?"99+":t.unreadCount)}}function kt(i,d){if(i&1){let t=w();o(0,"button",13),f("click",function(){_(t);let n=u(2);return C(n.clearAll())}),b(),o(1,"svg",14),m(2,"line",15)(3,"line",16),r()()}}function Pt(i,d){if(i&1){let t=w();o(0,"div",17),f("click",function(){let n=_(t).$implicit,a=u(2);return C(a.markAsRead(n))}),o(1,"div",18),p(2),r(),o(3,"div",19)(4,"div",20),p(5),r(),o(6,"div",21),p(7),r(),o(8,"div",22),p(9),r()(),o(10,"button",23),f("click",function(n){let a=_(t).$implicit,c=u(2);return C(c.removeNotification(a,n))}),b(),o(11,"svg",24),m(12,"line",15)(13,"line",16),r()()()}if(i&2){let t=d.$implicit,e=u(2);N("unread",!t.read),s(2),x(e.getNotificationIcon(t.type)),s(3),x(t.title),s(2),x(t.message),s(2),x(e.formatTime(t.timestamp))}}function Ot(i,d){i&1&&(o(0,"div",25)(1,"p"),p(2,"Aucune notification"),r()())}function It(i,d){if(i&1&&(o(0,"div",7)(1,"div",8)(2,"h3"),p(3,"Notifications"),r(),h(4,kt,4,0,"button",9),r(),o(5,"div",10),h(6,Pt,14,6,"div",11)(7,Ot,3,0,"div",12),r()()),i&2){let t=u();s(4),l("ngIf",t.notifications.length>0),s(2),l("ngForOf",t.notifications),s(),l("ngIf",t.notifications.length===0)}}var bt=(()=>{class i{constructor(t){this.notificationService=t,this.showDropdown=!1,this.notifications=[],this.unreadCount=0}ngOnInit(){this.notificationsSubscription=this.notificationService.notifications$.subscribe(t=>{this.notifications=t,this.unreadCount=this.notificationService.getUnreadCount()})}ngOnDestroy(){this.notificationsSubscription&&this.notificationsSubscription.unsubscribe()}onDocumentClick(t){t.target.closest(".notifications-container")||(this.showDropdown=!1)}toggleDropdown(){this.showDropdown=!this.showDropdown,this.showDropdown&&this.notificationService.markAllAsRead()}markAsRead(t){t.read||this.notificationService.markAsRead(t.id)}removeNotification(t,e){e.stopPropagation(),this.notificationService.removeNotification(t.id)}getNotificationIcon(t){switch(t){case"task":return"\u{1F4CB}";case"expense":return"\u{1F4B0}";case"water":return"\u{1F4A7}";case"household":return"\u{1F3E0}";default:return"\u{1F514}"}}formatTime(t){let n=new Date().getTime()-new Date(t).getTime(),a=Math.floor(n/6e4),c=Math.floor(n/36e5),v=Math.floor(n/864e5);return a<1?"\xC0 l'instant":a<60?`Il y a ${a} min`:c<24?`Il y a ${c}h`:v<7?`Il y a ${v}j`:new Date(t).toLocaleDateString("fr-FR")}clearAll(){this.notifications.forEach(t=>{this.notificationService.removeNotification(t.id)})}static{this.\u0275fac=function(e){return new(e||i)(g(H))}}static{this.\u0275cmp=M({type:i,selectors:[["app-notifications"]],hostBindings:function(e,n){e&1&&f("click",function(c){return n.onDocumentClick(c)},!1,j)},standalone:!0,features:[S],decls:6,vars:4,consts:[[1,"notifications-container"],[1,"notification-btn",3,"click","title"],["viewBox","0 0 24 24","aria-hidden","true"],["d","M12 22a2.5 2.5 0 0 0 2.45-2h-4.9A2.5 2.5 0 0 0 12 22Zm6-6V11a6 6 0 1 0-12 0v5l-2 2v1h16v-1l-2-2Z","fill","currentColor"],["class","notification-badge",4,"ngIf"],["class","notifications-dropdown",4,"ngIf"],[1,"notification-badge"],[1,"notifications-dropdown"],[1,"dropdown-header"],["class","clear-btn","title","Effacer toutes",3,"click",4,"ngIf"],[1,"notifications-list"],["class","notification-item",3,"unread","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["title","Effacer toutes",1,"clear-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],["aria-label","Supprimer la notification",1,"remove-btn",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"empty-state"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"button",1),f("click",function(){return n.toggleDropdown()}),b(),o(2,"svg",2),m(3,"path",3),r(),h(4,St,2,1,"span",4),r(),h(5,It,8,3,"div",5),r()),e&2&&(s(),l("title",n.unreadCount>0?n.unreadCount+" notification(s) non lue(s)":"Notifications"),Q("aria-label","Notifications"+(n.unreadCount>0?" ("+n.unreadCount+" non lues)":"")),s(3),l("ngIf",n.unreadCount>0),s(),l("ngIf",n.showDropdown))},dependencies:[P,z,k],styles:[".notifications-container[_ngcontent-%COMP%]{position:relative}.notification-btn[_ngcontent-%COMP%]{position:relative;background:transparent;border:none;cursor:pointer;padding:8px;border-radius:var(--notion-radius);color:var(--notion-text-primary);transition:background 20ms ease-in 0s;display:flex;align-items:center;justify-content:center}.notification-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.notification-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:var(--notion-red);color:#fff;border-radius:10px;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;padding:0 5px;border:2px solid var(--notion-bg)}.notifications-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);right:0;width:380px;max-width:calc(100vw - 32px);max-height:500px;background:var(--notion-bg);border:1px solid var(--notion-border);border-radius:var(--notion-radius);box-shadow:var(--notion-shadow-lg);z-index:1000;display:flex;flex-direction:column;overflow:hidden}.dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid var(--notion-border)}.dropdown-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--notion-text-primary)}.clear-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;border-radius:var(--notion-radius-sm);color:var(--notion-text-secondary);transition:all 20ms ease-in 0s;display:flex;align-items:center;justify-content:center}.clear-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.notifications-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px 16px;border-bottom:1px solid var(--notion-border);cursor:pointer;transition:background 20ms ease-in 0s;position:relative}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.notification-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.notification-item.unread[_ngcontent-%COMP%]{background:var(--notion-blue-bg)}.notification-item.unread[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.notification-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-text-primary);margin-bottom:4px;line-height:1.4}.notification-message[_ngcontent-%COMP%]{font-size:13px;color:var(--notion-text-secondary);line-height:1.4;margin-bottom:6px;word-wrap:break-word}.notification-time[_ngcontent-%COMP%]{font-size:11px;color:var(--notion-text-tertiary)}.remove-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;border-radius:var(--notion-radius-sm);color:var(--notion-text-tertiary);opacity:0;transition:all 20ms ease-in 0s;flex-shrink:0;display:flex;align-items:center;justify-content:center}.notification-item[_ngcontent-%COMP%]:hover   .remove-btn[_ngcontent-%COMP%]{opacity:1}.remove-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.empty-state[_ngcontent-%COMP%]{padding:48px 24px;text-align:center;color:var(--notion-text-tertiary);font-size:14px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media (max-width: 768px){.notifications-dropdown[_ngcontent-%COMP%]{width:320px;right:-80px}}@media (max-width: 480px){.notifications-dropdown[_ngcontent-%COMP%]{width:calc(100vw - 32px);right:-120px}}"]})}}return i})();var xt=(()=>{class i{constructor(){this.apiKey="YOUR_API_KEY",this.apiUrl="https://api.openweathermap.org/data/2.5/weather",this.useMock=!0}getCurrentLocation(){return new Promise((t,e)=>{if(!navigator.geolocation){e(new Error("La g\xE9olocalisation n'est pas support\xE9e par votre navigateur"));return}navigator.geolocation.getCurrentPosition(n=>{t({latitude:n.coords.latitude,longitude:n.coords.longitude})},n=>{console.error("Erreur de g\xE9olocalisation:",n),e(n)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}getWeatherByLocation(t,e){return B({city:this.getCityNameFromCoordinates(t,e),temperature:Math.floor(Math.random()*15)+15,description:this.getRandomDescription(),icon:this.getRandomIcon(),humidity:Math.floor(Math.random()*40)+40,windSpeed:Math.floor(Math.random()*20)+5,feelsLike:Math.floor(Math.random()*15)+15,latitude:t,longitude:e})}getWeather(t="Paris"){return B({city:t,temperature:Math.floor(Math.random()*15)+15,description:this.getRandomDescription(),icon:this.getRandomIcon(),humidity:Math.floor(Math.random()*40)+40,windSpeed:Math.floor(Math.random()*20)+5,feelsLike:Math.floor(Math.random()*15)+15})}getWeatherAuto(){return new G(t=>{this.getCurrentLocation().then(e=>{this.getWeatherByLocation(e.latitude,e.longitude).subscribe({next:n=>t.next(n),error:n=>{console.error("Erreur lors de la r\xE9cup\xE9ration de la m\xE9t\xE9o:",n),this.getWeather("Paris").subscribe({next:a=>t.next(a),error:a=>t.error(a),complete:()=>t.complete()})},complete:()=>t.complete()})}).catch(e=>{console.error("Erreur de g\xE9olocalisation:",e),this.getWeather("Paris").subscribe({next:n=>t.next(n),error:n=>t.error(n),complete:()=>t.complete()})})})}getCityNameFromCoordinates(t,e){return t>=48.8&&t<=48.9&&e>=2.2&&e<=2.4?"Paris":t>=45.7&&t<=45.8&&e>=4.8&&e<=4.9?"Lyon":t>=43.2&&t<=43.3&&e>=5.3&&e<=5.4?"Marseille":t>=50.6&&t<=50.7&&e>=3&&e<=3.1?"Lille":t>=44.8&&t<=44.9&&e>=-.6&&e<=-.5?"Bordeaux":t>=43.6&&t<=43.7&&e>=1.4&&e<=1.5?"Toulouse":t>=47.2&&t<=47.3&&e>=-1.5&&e<=-1.4?"Nantes":t>=48.1&&t<=48.2&&e>=-1.6&&e<=-1.5?"Rennes":t>=45.1&&t<=45.2&&e>=5.7&&e<=5.8?"Grenoble":t>=49.1&&t<=49.2&&e>=6.1&&e<=6.2?"Strasbourg":t>=36.7&&t<=37&&e>=10&&e<=10.3?"Tunis":t>=52.3&&t<=52.6&&e>=4.7&&e<=5?"Amsterdam":t>=50&&t<=50.2&&e>=4.3&&e<=4.5?"Bruxelles":t>=48.1&&t<=48.3&&e>=11.4&&e<=11.7?"Munich":t>=52.4&&t<=52.6&&e>=13.2&&e<=13.6?"Berlin":t>=41.8&&t<=41.9&&e>=12.4&&e<=12.6?"Rome":t>=40.4&&t<=40.5&&e>=-3.7&&e<=-3.6?"Madrid":t>=51.4&&t<=51.6&&e>=-.2&&e<=0?"Londres":"Ma localisation"}getRandomDescription(){let t=["Ensoleill\xE9","Nuageux","Partiellement nuageux","Pluvieux","Orageux"];return t[Math.floor(Math.random()*t.length)]}getRandomIcon(){let t=["\u2600\uFE0F","\u2601\uFE0F","\u{1F324}\uFE0F","\u{1F327}\uFE0F","\u26C8\uFE0F"];return t[Math.floor(Math.random()*t.length)]}getWeatherIcon(t){return{Clear:"\u2600\uFE0F",Clouds:"\u2601\uFE0F",Rain:"\u{1F327}\uFE0F",Drizzle:"\u{1F326}\uFE0F",Thunderstorm:"\u26C8\uFE0F",Snow:"\u2744\uFE0F",Mist:"\u{1F32B}\uFE0F",Fog:"\u{1F32B}\uFE0F"}[t]||"\u{1F324}\uFE0F"}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var R=(()=>{class i{constructor(){this.toggleSidebarSubject=new K,this.toggleSidebar$=this.toggleSidebarSubject.asObservable()}toggle(){this.toggleSidebarSubject.next()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Dt(i,d){if(i&1){let t=w();o(0,"button",20),f("click",function(){_(t);let n=u();return C(n.toggleSidebar())}),b(),o(1,"svg",21),m(2,"line",22)(3,"line",23)(4,"line",24),r()()}}function Et(i,d){if(i&1&&(o(0,"div",25)(1,"span",26),p(2),r(),o(3,"div",27)(4,"span",28),p(5),r(),o(6,"span",29),p(7),r()()()),i&2){let t=u();s(2),x(t.weather.icon),s(3),tt("",t.weather.temperature,"\xB0C"),s(2),x(t.weather.city)}}function jt(i,d){i&1&&(o(0,"div",30)(1,"span"),p(2,"Chargement..."),r()())}function zt(i,d){i&1&&(b(),o(0,"svg",21),m(1,"circle",31)(2,"line",32)(3,"line",33)(4,"line",34)(5,"line",35)(6,"line",36)(7,"line",37)(8,"line",38)(9,"line",39),r())}function Lt(i,d){i&1&&(b(),o(0,"svg",21),m(1,"path",40),r())}function At(i,d){if(i&1){let t=w();o(0,"div",41)(1,"div",42),f("click",function(){_(t);let n=u();return C(n.logout())}),b(),o(2,"svg",43),m(3,"path",44)(4,"polyline",45)(5,"line",46),r(),F(),o(6,"span"),p(7,"D\xE9connexion"),r()()()}}var wt=(()=>{class i{constructor(t,e,n,a,c){this.weatherService=t,this.sidebarService=e,this.router=n,this.authService=a,this.themeService=c,this.showMenu=!1,this.showProfileDropdown=!1,this.weather=null,this.weatherLoading=!1,this.isMobile=!1,this.currentUser=null,this.currentTheme="light"}onResize(){this.checkMobile()}onDocumentClick(t){t.target.closest(".profile-container")||(this.showProfileDropdown=!1)}checkMobile(){this.isMobile=window.innerWidth<=768}ngOnInit(){this.checkMobile(),this.loadWeather(),this.currentUser=this.authService.getCurrentUser(),this.userSubscription=this.authService.currentUser$.subscribe(t=>{this.currentUser=t}),this.currentTheme=this.themeService.getCurrentTheme(),this.themeSubscription=this.themeService.theme$.subscribe(t=>{this.currentTheme=t})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.themeSubscription&&this.themeSubscription.unsubscribe()}get userInitials(){if(!this.currentUser||!this.currentUser.fullName)return"AM";let t=this.currentUser.fullName.split(" ").filter(e=>e.length>0);return t.length===0?"AM":t.length===1?t[0].substring(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()}get userName(){return this.currentUser?this.currentUser.fullName:"Alex Martin"}toggleMenu(){this.showMenu=!this.showMenu}toggleProfileDropdown(){this.showProfileDropdown=!this.showProfileDropdown}closeProfileDropdown(){this.showProfileDropdown=!1}toggleSidebar(){this.sidebarService.toggle()}logout(){this.showProfileDropdown=!1,this.authService.logout()}toggleTheme(){this.themeService.toggleTheme()}loadWeather(){this.weatherLoading=!0,this.weatherService.getWeatherAuto().subscribe({next:t=>{this.weather=t,this.weatherLoading=!1},error:t=>{console.error("Erreur lors du chargement de la m\xE9t\xE9o:",t),this.weatherLoading=!1}})}static{this.\u0275fac=function(e){return new(e||i)(g(xt),g(R),g(T),g(y),g(V))}}static{this.\u0275cmp=M({type:i,selectors:[["app-navbar"]],hostBindings:function(e,n){e&1&&f("resize",function(c){return n.onResize(c)},!1,E)("click",function(c){return n.onDocumentClick(c)},!1,j)},standalone:!0,features:[S],decls:26,vars:9,consts:[[1,"navbar"],[1,"navbar-left"],["class","menu-btn","aria-label","Menu",3,"click",4,"ngIf"],["routerLink","/home","aria-label","DailyFix home",1,"brand"],[1,"badge"],["class","weather-widget",4,"ngIf"],["class","weather-widget weather-loading",4,"ngIf"],[1,"navbar-right"],["aria-label","Toggle theme",1,"icon-btn",3,"click","title"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["aria-label","Settings","title","Param\xE8tres","routerLink","/settings",1,"icon-btn"],["viewBox","0 0 24 24","aria-hidden","true"],["d","M19.14,12.94a7.43,7.43,0,0,0,.05-.94,7.43,7.43,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.64L19.8,5.27a.5.5,0,0,0-.6-.22l-2.49,1a7.08,7.08,0,0,0-1.63-.94l-.38-2.65A.5.5,0,0,0,14.21,2H9.79a.5.5,0,0,0-.49.42L8.92,5.07a7.08,7.08,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22L2.63,8.77a.5.5,0,0,0,.12.64L4.86,11.06a7.43,7.43,0,0,0-.05.94,7.43,7.43,0,0,0,.05.94L2.75,14.59a.5.5,0,0,0-.12.64l1.57,2.86a.5.5,0,0,0,.6.22l2.49-1a7.08,7.08,0,0,0,1.63.94l.38,2.65a.5.5,0,0,0,.49.42h4.42a.5.5,0,0,0,.49-.42l.38-2.65a7.08,7.08,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l1.57-2.86a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z","fill","currentColor"],[1,"profile-container"],["role","button","tabindex","0","aria-label","Compte utilisateur",1,"profile",3,"click"],[1,"avatar"],[1,"name"],["width","12","height","12","viewBox","0 0 12 12","fill","none","stroke","currentColor","stroke-width","2",1,"dropdown-arrow"],["d","M3 4.5L6 7.5L9 4.5"],["class","profile-dropdown",4,"ngIf"],["aria-label","Menu",1,"menu-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","18","x2","21","y2","18"],[1,"weather-widget"],[1,"weather-icon"],[1,"weather-info"],[1,"weather-temp"],[1,"weather-city"],[1,"weather-widget","weather-loading"],["cx","12","cy","12","r","5"],["x1","12","y1","1","x2","12","y2","3"],["x1","12","y1","21","x2","12","y2","23"],["x1","4.22","y1","4.22","x2","5.64","y2","5.64"],["x1","18.36","y1","18.36","x2","19.78","y2","19.78"],["x1","1","y1","12","x2","3","y2","12"],["x1","21","y1","12","x2","23","y2","12"],["x1","4.22","y1","19.78","x2","5.64","y2","18.36"],["x1","18.36","y1","5.64","x2","19.78","y2","4.22"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],[1,"profile-dropdown"],[1,"dropdown-item",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"]],template:function(e,n){e&1&&(o(0,"nav",0)(1,"div",1),h(2,Dt,5,0,"button",2),o(3,"a",3),p(4,"DailyFix"),r(),o(5,"span",4),p(6,"Version Gratuite"),r(),h(7,Et,8,3,"div",5)(8,jt,3,0,"div",6),r(),o(9,"div",7),m(10,"app-notifications"),o(11,"button",8),f("click",function(){return n.toggleTheme()}),h(12,zt,10,0,"svg",9)(13,Lt,2,0,"svg",9),r(),o(14,"button",10),b(),o(15,"svg",11),m(16,"path",12),r()(),F(),o(17,"div",13)(18,"div",14),f("click",function(){return n.toggleProfileDropdown()}),o(19,"div",15),p(20),r(),o(21,"span",16),p(22),r(),b(),o(23,"svg",17),m(24,"path",18),r()(),h(25,At,8,0,"div",19),r()()()),e&2&&(s(2),l("ngIf",n.isMobile),s(5),l("ngIf",n.weather&&!n.weatherLoading),s(),l("ngIf",n.weatherLoading),s(3),X("title",n.currentTheme==="dark"?"Mode clair":"Mode sombre"),s(),l("ngIf",n.currentTheme==="dark"),s(),l("ngIf",n.currentTheme==="light"),s(7),x(n.userInitials),s(2),x(n.userName),s(3),l("ngIf",n.showProfileDropdown))},dependencies:[P,k,A,L,bt],styles:[".navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;height:45px;display:flex;align-items:center;justify-content:space-between;padding:0 14px;background:var(--notion-bg);border-bottom:1px solid var(--notion-border);font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;box-shadow:0 1px 2px #0000000d}.navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;transition:margin-left .1s ease-in 0s}.menu-btn[_ngcontent-%COMP%]{display:none;background:transparent;border:none;color:var(--notion-text-primary);cursor:pointer;padding:6px;border-radius:var(--notion-radius);transition:background 20ms ease-in 0s;flex-shrink:0}.menu-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}@media (max-width: 768px){.menu-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.navbar-left[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{padding:0 8px}.navbar-left[_ngcontent-%COMP%]{margin-left:48px;gap:6px;min-width:0;overflow:hidden}.brand[_ngcontent-%COMP%]{font-size:13px;padding:4px 6px;white-space:nowrap}.badge[_ngcontent-%COMP%]{display:none}.navbar-right[_ngcontent-%COMP%]{gap:2px;flex-shrink:0}.profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .weather-widget[_ngcontent-%COMP%]{display:none}.icon-btn[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px}}@media (max-width: 480px){.navbar[_ngcontent-%COMP%]{padding:0 4px}.navbar-left[_ngcontent-%COMP%]{margin-left:40px;gap:4px}.brand[_ngcontent-%COMP%]{font-size:12px;padding:4px}.icon-btn[_ngcontent-%COMP%]{width:24px;height:24px;min-width:24px}.icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.avatar[_ngcontent-%COMP%]{width:20px;height:20px;font-size:10px}}.brand[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-text-primary);text-decoration:none;padding:4px 8px;border-radius:var(--notion-radius);transition:background 20ms ease-in 0s}.brand[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.badge[_ngcontent-%COMP%]{font-size:11px;background:var(--notion-gray-bg);color:var(--notion-text-secondary);border-radius:var(--notion-radius);padding:2px 6px;font-weight:500}.nav-links[_ngcontent-%COMP%]{display:none}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--notion-text-secondary);font-size:14px;font-weight:400;padding:4px 8px;border-radius:var(--notion-radius);transition:background 20ms ease-in 0s;position:relative}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--notion-text-primary);font-weight:500;background:var(--notion-bg-hover)}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.weather-widget[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 12px;background:var(--notion-bg-tertiary);border-radius:var(--notion-radius);border:1px solid var(--notion-border);transition:background 20ms ease-in 0s;cursor:default}.weather-widget[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.weather-icon[_ngcontent-%COMP%]{font-size:18px;line-height:1}.weather-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px}.weather-temp[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--notion-text-primary);line-height:1.2}.weather-city[_ngcontent-%COMP%]{font-size:10px;color:var(--notion-text-tertiary);line-height:1}.weather-loading[_ngcontent-%COMP%]{font-size:11px;color:var(--notion-text-secondary);padding:4px 8px}@media (max-width: 768px){.weather-widget[_ngcontent-%COMP%]{display:none}}.icon-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:var(--notion-radius);border:none;background:transparent;color:var(--notion-text-secondary);cursor:pointer;transition:background 20ms ease-in 0s}.icon-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-text-primary)}.icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.profile-container[_ngcontent-%COMP%]{position:relative}.profile[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:2px 6px;border-radius:var(--notion-radius);cursor:pointer;transition:background 20ms ease-in 0s;position:relative}.profile[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.avatar[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:3px;display:inline-flex;align-items:center;justify-content:center;color:#fff;background:var(--notion-text-primary);font-weight:500;font-size:11px}.dark-theme[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{background:#ffffff26!important;color:var(--notion-text-primary)!important}.name[_ngcontent-%COMP%]{color:var(--notion-text-primary);font-weight:400;font-size:14px}.dropdown-arrow[_ngcontent-%COMP%]{color:var(--notion-text-tertiary);transition:transform 20ms ease-in 0s;flex-shrink:0}.profile[_ngcontent-%COMP%]:hover   .dropdown-arrow[_ngcontent-%COMP%]{color:var(--notion-text-secondary)}.profile-container[_ngcontent-%COMP%]:hover   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.profile-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);right:0;background:var(--notion-bg);border:1px solid var(--notion-border);border-radius:var(--notion-radius);box-shadow:var(--notion-shadow-lg);min-width:160px;z-index:1001;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .15s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;color:var(--notion-text-primary);font-size:14px;cursor:pointer;transition:background 20ms ease-in 0s}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.dropdown-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--notion-text-secondary);flex-shrink:0}.dropdown-item[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:var(--notion-text-primary)}.dropdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}@media (max-width: 768px){.profile-dropdown[_ngcontent-%COMP%]{right:-8px;min-width:140px}}"]})}}return i})();function Vt(i,d){if(i&1){let t=w();o(0,"div",19),f("click",function(){_(t);let n=u();return C(n.toggleSidebar())}),r()}}function Ht(i,d){i&1&&(o(0,"span",20),p(1,"DailyFix"),r())}function Rt(i,d){if(i&1){let t=w();o(0,"button",21),f("click",function(){_(t);let n=u();return C(n.toggleSidebar())}),b(),o(1,"svg",22),m(2,"path",23),r()()}}function Bt(i,d){if(i&1){let t=w();o(0,"button",24),f("click",function(){_(t);let n=u();return C(n.toggleSidebar())}),b(),o(1,"svg",22),m(2,"path",25),r()()}}function Ft(i,d){i&1&&(o(0,"div",26),p(1,"Navigation"),r())}function $t(i,d){if(i&1&&(o(0,"span",29),p(1),r()),i&2){let t=u().$implicit;s(),x(t.label)}}function Ut(i,d){if(i&1){let t=w();o(0,"a",27),f("click",function(){_(t);let n=u();return C(n.onNavItemClick())}),o(1,"span",28),p(2),r(),h(3,$t,2,1,"span",18),r()}if(i&2){let t=d.$implicit,e=u();l("routerLink",t.route)("title",e.isCollapsed?t.label:""),s(2),x(t.icon),s(),l("ngIf",!e.isCollapsed)}}function Wt(i,d){i&1&&(o(0,"span",29),p(1,"D\xE9connexion"),r())}var yt=(()=>{class i{constructor(t,e,n){this.sidebarService=t,this.authService=e,this.router=n,this.isCollapsed=!1,this.isMobile=!1,this.navigationItems=[{icon:"\u{1F3E0}",label:"Accueil",route:"/home"},{icon:"\u2713",label:"T\xE2ches",route:"/tasks"},{icon:"\u{1F4C5}",label:"Calendrier",route:"/calendar"},{icon:"\u2764\uFE0F",label:"Sant\xE9",route:"/health"},{icon:"\u{1F4B0}",label:"Finances",route:"/finance"},{icon:"\u{1F3E1}",label:"Maison",route:"/home-org"},{icon:"\u{1F465}",label:"Social",route:"/social"},{icon:"\u{1F9D8}",label:"Bien-\xEAtre",route:"/wellness"}]}onResize(t){this.checkMobile()}checkMobile(){let t=this.isMobile;this.isMobile=window.innerWidth<=768,this.isMobile&&!t&&(this.isCollapsed=!0)}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.isMobile&&(this.isCollapsed?document.body.style.overflow="":document.body.style.overflow="hidden"),setTimeout(()=>{this.updateMainContentMargin()},0)}updateMainContentMargin(){let t=document.querySelector(".main-content");t&&(this.isMobile?t.style.marginLeft="0":t.style.marginLeft=this.isCollapsed?"48px":"240px")}ngOnInit(){this.checkMobile(),this.isMobile&&(this.isCollapsed=!0),this.updateMainContentMargin(),this.sidebarSubscription=this.sidebarService.toggleSidebar$.subscribe(()=>{this.toggleSidebar()})}onNavItemClick(){this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow="",this.updateMainContentMargin())}logout(){this.isMobile&&(this.isCollapsed=!0,document.body.style.overflow=""),this.authService.logout()}ngOnDestroy(){document.body.style.overflow="",this.sidebarSubscription&&this.sidebarSubscription.unsubscribe()}static{this.\u0275fac=function(e){return new(e||i)(g(R),g(y),g(T))}}static{this.\u0275cmp=M({type:i,selectors:[["app-sidebar"]],hostBindings:function(e,n){e&1&&f("resize",function(c){return n.onResize(c)},!1,E)},standalone:!0,features:[S],decls:20,vars:10,consts:[["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"sidebar"],[1,"sidebar-header"],[1,"sidebar-brand"],[1,"brand-icon"],["class","brand-text",4,"ngIf"],["class","collapse-btn",3,"click",4,"ngIf"],["class","expand-btn",3,"click",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-section"],["class","nav-section-title",4,"ngIf"],["routerLinkActive","active","class","nav-item",3,"routerLink","title","click",4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"nav-item","logout-item",3,"click","title"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"nav-icon"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],["class","nav-label",4,"ngIf"],[1,"sidebar-overlay",3,"click"],[1,"brand-text"],[1,"collapse-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","none"],["d","M10 12L6 8L10 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"expand-btn",3,"click"],["d","M6 12L10 8L6 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-section-title"],["routerLinkActive","active",1,"nav-item",3,"click","routerLink","title"],[1,"nav-icon"],[1,"nav-label"]],template:function(e,n){e&1&&(h(0,Vt,1,0,"div",0),o(1,"aside",1)(2,"div",2)(3,"div",3)(4,"span",4),p(5,"\u{1F4DD}"),r(),h(6,Ht,2,0,"span",5),r(),h(7,Rt,3,0,"button",6)(8,Bt,3,0,"button",7),r(),o(9,"nav",8)(10,"div",9),h(11,Ft,2,0,"div",10)(12,Ut,4,4,"a",11),r()(),o(13,"div",12)(14,"button",13),f("click",function(){return n.logout()}),b(),o(15,"svg",14),m(16,"path",15)(17,"polyline",16)(18,"line",17),r(),h(19,Wt,2,0,"span",18),r()()()),e&2&&(l("ngIf",!n.isCollapsed&&n.isMobile),s(),N("collapsed",n.isCollapsed),s(5),l("ngIf",!n.isCollapsed),s(),l("ngIf",!n.isCollapsed),s(),l("ngIf",n.isCollapsed),s(3),l("ngIf",!n.isCollapsed),s(),l("ngForOf",n.navigationItems),s(2),l("title",n.isCollapsed?"D\xE9connexion":""),s(5),l("ngIf",!n.isCollapsed))},dependencies:[P,z,k,A,L,ct],styles:['.sidebar[_ngcontent-%COMP%]{position:fixed!important;left:0;top:45px;width:240px;height:calc(100vh - 45px);background:var(--notion-bg);border-right:1px solid var(--notion-border);display:flex;flex-direction:column;transition:width .1s ease-in 0s,transform .2s ease-in 0s;z-index:100;overflow-y:auto;overflow-x:hidden;will-change:width;transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{width:48px}@media (max-width: 1024px){.sidebar[_ngcontent-%COMP%]{position:fixed!important;width:48px}.sidebar[_ngcontent-%COMP%]:not(.collapsed){width:240px;z-index:1000;box-shadow:var(--notion-shadow-lg)}}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;inset:45px 0 0;background:#00000080;z-index:999;display:none}@media (max-width: 768px){.sidebar-overlay[_ngcontent-%COMP%]{display:block}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed!important;width:280px;max-width:85vw;transform:translate(-100%);z-index:1000;box-shadow:var(--notion-shadow-lg);transition:transform .2s ease-in 0s}.sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar.collapsed[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:100%;max-width:100%;transform:translate(-100%)}.sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;min-height:45px;border-bottom:1px solid var(--notion-border);position:sticky;top:0;background:var(--notion-bg);z-index:10}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.brand-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.brand-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--notion-text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.collapse-btn[_ngcontent-%COMP%], .expand-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:none;background:transparent;color:var(--notion-text-secondary);cursor:pointer;border-radius:var(--notion-radius);display:flex;align-items:center;justify-content:center;transition:background 20ms ease-in 0s;flex-shrink:0}.collapse-btn[_ngcontent-%COMP%]:hover, .expand-btn[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:4px 0;overflow-y:auto}.nav-section[_ngcontent-%COMP%]{margin-bottom:8px}.nav-section-title[_ngcontent-%COMP%]{padding:4px 12px;font-size:11px;font-weight:500;color:var(--notion-text-tertiary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:2px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 8px 4px 12px;color:var(--notion-text-secondary);text-decoration:none;font-size:14px;font-weight:400;border-radius:0;transition:background 20ms ease-in 0s;position:relative;min-height:28px}.nav-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover)}.nav-item.active[_ngcontent-%COMP%]{background:var(--notion-bg-hover);color:var(--notion-text-primary);font-weight:500}.nav-item.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:2px;background:var(--notion-text-primary)}.nav-icon[_ngcontent-%COMP%]{font-size:16px;width:20px;text-align:center;flex-shrink:0}.nav-label[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{justify-content:center;padding:4px}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{display:none}.sidebar-footer[_ngcontent-%COMP%]{border-top:1px solid var(--notion-border);padding:4px 0;margin-top:auto}.logout-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:4px 8px 4px 12px;color:var(--notion-text-secondary);background:transparent;border:none;text-align:left;font-size:14px;font-weight:400;cursor:pointer;transition:background 20ms ease-in 0s,color 20ms ease-in 0s;min-height:28px}.logout-item[_ngcontent-%COMP%]:hover{background:var(--notion-bg-hover);color:var(--notion-red)}.logout-item[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:inherit}.sidebar.collapsed[_ngcontent-%COMP%]   .logout-item[_ngcontent-%COMP%]{justify-content:center;padding:4px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent}.sidebar[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:var(--notion-border)}']})}}return i})();function Gt(i,d){i&1&&m(0,"app-navbar")}function Kt(i,d){i&1&&m(0,"app-sidebar")}var Mt=(()=>{class i{constructor(t,e,n,a){this.router=t,this.authService=e,this.notificationService=n,this.themeService=a,this.title="dailyFix",this.showNavbar=!1,this.showSidebar=!1,this.routerSubscription=this.router.events.pipe(q(c=>c instanceof at)).subscribe(c=>{let v=c.urlAfterRedirects||c.url;this.updateVisibility(v)})}ngOnInit(){this.themeService.watchSystemPreference(),this.userSubscription=this.authService.currentUser$.subscribe(()=>{let e=this.router.url;this.updateVisibility(e)});let t=this.router.url;this.updateVisibility(t),setTimeout(()=>{!this.authService.isAuthenticated()&&t!=="/login"&&t!=="/"&&this.router.navigate(["/login"])},100)}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.routerSubscription&&this.routerSubscription.unsubscribe()}updateVisibility(t){let e=t==="/login"||t==="/"||t.startsWith("/#/login"),n=this.authService.isAuthenticated();this.showNavbar=n&&!e,this.showSidebar=n&&!e}static{this.\u0275fac=function(e){return new(e||i)(g(T),g(y),g(H),g(V))}}static{this.\u0275cmp=M({type:i,selectors:[["app-root"]],standalone:!0,features:[S],decls:4,vars:4,consts:[[4,"ngIf"],[1,"main-content"]],template:function(e,n){e&1&&(h(0,Gt,1,0,"app-navbar",0)(1,Kt,1,0,"app-sidebar",0),o(2,"main",1),m(3,"router-outlet"),r()),e&2&&(l("ngIf",n.showNavbar),s(),l("ngIf",n.showSidebar),s(),N("no-sidebar",!n.showSidebar))},dependencies:[st,wt,yt,P,k],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;overflow-x:hidden}.main-content[_ngcontent-%COMP%]{margin-left:240px;margin-top:45px;min-height:calc(100vh - 45px);background:var(--notion-bg-secondary);transition:margin-left .1s ease-in 0s;width:calc(100% - 240px);overflow-x:hidden;box-sizing:border-box}.main-content.no-sidebar[_ngcontent-%COMP%]{margin-left:0;margin-top:0;min-height:100vh;width:100%}@media (max-width: 1024px){.main-content[_ngcontent-%COMP%]{margin-left:48px;width:calc(100% - 48px)}}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0;margin-top:45px;width:100%}}"]})}}return i})();rt(Mt,gt).catch(i=>console.error(i));
